This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
public/
  vite.svg
src/
  assets/
    react.svg
  components/
    blockchain/
      ChainStatus.tsx
      index.ts
      WalletConnect.tsx
    credentials/
      CredentialCard.tsx
      CredentialDetailModal.tsx
      CredentialsList.tsx
      index.ts
      IssueCredentialForm.tsx
      VerifyCredential.tsx
    did/
      CreateDIDForm.tsx
      CreateDIDModal.tsx
      DIDStatus.tsx
      index.ts
      InstitutionRegistration.tsx
    error/
      ErrorBoundary.tsx
    layout/
      Footer.tsx
      Header.tsx
      index.ts
      MainLayout.tsx
      Sidebar.tsx
    ui/
      Badge.tsx
      Button.tsx
      Card.tsx
      index.ts
      Input.tsx
      Modal.tsx
      Spinner.tsx
  hooks/
    blockchain/
      usePolkadotApi.ts
  lib/
    utils/
      cn.ts
      constants.ts
  pages/
    CreateDIDPage.tsx
    Credentials.tsx
    Dashboard.tsx
    Home.tsx
    Institution.tsx
    Institutions.tsx
    IssueCredential.tsx
    Verify.tsx
  providers/
    PolkadotProvider.tsx
    WalletProvider.tsx
  store/
    credentials.store.ts
    did.store.ts
    ui.store.ts
    wallet.store.ts
  App.css
  App.tsx
  index.css
  main.tsx
  vite-env.d.ts
.gitignore
check-files.sh
eslint.config.js
index.html
package.json
README.md
tsconfig.app.json
tsconfig.json
tsconfig.node.json
tsconfig.tsbuildinfo
vite.config.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="public/vite.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
</file>

<file path="src/assets/react.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>
</file>

<file path="src/components/blockchain/ChainStatus.tsx">
import { Circle } from 'lucide-react';

export default function ChainStatus() {
  // Stub version - no Polkadot connection
  const isConnected = false;
  const blockNumber = 0;
  const chainName = 'Offline';

  return (
    <div className="flex items-center space-x-2 text-sm">
      <Circle className="h-2 w-2 fill-red-500 text-red-500" />
      <span className="text-muted-foreground hidden lg:inline">
        {chainName}
      </span>
    </div>
  );
}
</file>

<file path="src/components/blockchain/index.ts">
export { default as WalletConnect } from './WalletConnect';
export { default as ChainStatus } from './ChainStatus';
</file>

<file path="src/components/blockchain/WalletConnect.tsx">
import { useState } from 'react';
import { Wallet, ChevronDown, Copy, LogOut, ExternalLink } from 'lucide-react';
import { Button } from '../ui/Button';
import { useWalletStore } from '@/store/wallet.store';
import { useWalletContext } from '@/providers/WalletProvider';
import { toast } from 'sonner';

export default function WalletConnect() {
  const { isConnected, account, disconnectWallet } = useWalletStore();
  const { enableWallet } = useWalletContext();
  const [showDropdown, setShowDropdown] = useState(false);

  const handleConnect = async () => {
    try {
      await enableWallet();
    } catch (error) {
      console.error('Failed to connect wallet:', error);
    }
  };

  const copyAddress = () => {
    if (account?.address) {
      navigator.clipboard.writeText(account.address);
      toast.success('Address copied to clipboard');
      setShowDropdown(false);
    }
  };

  const viewOnExplorer = () => {
    if (account?.address) {
      // Update this URL based on your network
      window.open(`https://polkadot.js.org/apps/#/accounts/${account.address}`, '_blank');
      setShowDropdown(false);
    }
  };

  if (!isConnected) {
    return (
      <Button onClick={handleConnect} size="sm">
        <Wallet className="h-4 w-4 mr-2" />
        Connect Wallet
      </Button>
    );
  }

  return (
    <div className="relative">
      <Button
        variant="outline"
        size="sm"
        onClick={() => setShowDropdown(!showDropdown)}
        className="flex items-center"
      >
        <div className="h-6 w-6 rounded-full bg-gradient-to-br from-primary to-purple-600 mr-2 flex items-center justify-center text-xs text-white font-bold">
          {account?.name?.charAt(0)?.toUpperCase() || '?'}
        </div>
        <span className="hidden sm:inline">
          {account?.name || `${account?.address.slice(0, 6)}...${account?.address.slice(-4)}`}
        </span>
        <ChevronDown className="h-4 w-4 ml-2" />
      </Button>

      {showDropdown && (
        <>
          {/* Backdrop */}
          <div 
            className="fixed inset-0 z-40" 
            onClick={() => setShowDropdown(false)}
          />
          
          {/* Dropdown */}
          <div className="absolute right-0 mt-2 w-64 rounded-md shadow-lg bg-card border border-border z-50">
            <div className="py-1">
              {/* Account Info */}
              <div className="px-4 py-3 border-b border-border">
                <div className="flex items-center space-x-2 mb-2">
                  <div className="h-8 w-8 rounded-full bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center text-sm text-white font-bold">
                    {account?.name?.charAt(0)?.toUpperCase() || '?'}
                  </div>
                  <div className="flex-1 min-w-0">
                    <p className="text-sm font-medium truncate">{account?.name || 'Account'}</p>
                    {account?.source && (
                      <p className="text-xs text-muted-foreground capitalize">{account.source}</p>
                    )}
                  </div>
                </div>
                <p className="text-xs text-muted-foreground font-mono break-all">
                  {account?.address}
                </p>
              </div>

              {/* Actions */}
              <button
                onClick={copyAddress}
                className="flex items-center w-full text-left px-4 py-2 text-sm hover:bg-accent transition-colors"
              >
                <Copy className="h-4 w-4 mr-2" />
                Copy Address
              </button>

              <button
                onClick={viewOnExplorer}
                className="flex items-center w-full text-left px-4 py-2 text-sm hover:bg-accent transition-colors"
              >
                <ExternalLink className="h-4 w-4 mr-2" />
                View on Explorer
              </button>

              <div className="border-t border-border my-1" />

              <button
                onClick={() => {
                  disconnectWallet();
                  setShowDropdown(false);
                  toast.success('Wallet disconnected');
                }}
                className="flex items-center w-full text-left px-4 py-2 text-sm text-destructive hover:bg-accent transition-colors"
              >
                <LogOut className="h-4 w-4 mr-2" />
                Disconnect
              </button>
            </div>
          </div>
        </>
      )}
    </div>
  );
}
</file>

<file path="src/components/credentials/CredentialCard.tsx">
// src/components/credentials/CredentialCard.tsx
import { useState } from 'react';
import { 
  Award, 
  Building2, 
  Calendar, 
  FileText, 
  ExternalLink,
  Download,
  Share2,
  Eye,
  AlertCircle,
  CheckCircle2,
  XCircle
} from 'lucide-react';
import { Card, CardHeader, CardContent } from '../ui/Card';
import { Button } from '../ui/Button';
import { Badge } from '../ui/Badge';
import { cn } from '@/lib/utils/cn';

export interface Credential {
  id: string;
  holder: string;
  issuer: string;
  issuerName?: string;
  credentialHash: string;
  credentialType: string;
  degreeName?: string;
  fieldOfStudy?: string;
  issuedAt: number;
  expiresAt?: number;
  revoked: boolean;
  metadata?: string;
}

interface CredentialCardProps {
  credential: Credential;
  onViewDetails?: () => void;
  onVerify?: () => void;
  onShare?: () => void;
  onDownload?: () => void;
}

export default function CredentialCard({ 
  credential, 
  onViewDetails,
  onVerify,
  onShare,
  onDownload 
}: CredentialCardProps) {
  const [isHovered, setIsHovered] = useState(false);

  // Determine credential status
  const getStatus = () => {
    if (credential.revoked) {
      return {
        label: 'Revoked',
        variant: 'error' as const,
        icon: XCircle,
        color: 'text-red-600'
      };
    }
    
    if (credential.expiresAt && credential.expiresAt < Date.now()) {
      return {
        label: 'Expired',
        variant: 'warning' as const,
        icon: AlertCircle,
        color: 'text-yellow-600'
      };
    }
    
    return {
      label: 'Active',
      variant: 'success' as const,
      icon: CheckCircle2,
      color: 'text-green-600'
    };
  };

  const status = getStatus();
  const StatusIcon = status.icon;

  // Format dates
  const formatDate = (timestamp: number) => {
    return new Date(timestamp).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });
  };

  // Get credential type color
  const getTypeColor = (type: string) => {
    const colors: Record<string, string> = {
      "Bachelor's Degree": 'bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400',
      "Master's Degree": 'bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400',
      "Doctorate (PhD)": 'bg-indigo-100 text-indigo-800 dark:bg-indigo-900/20 dark:text-indigo-400',
      "Certificate": 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400',
      "Transcript": 'bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400',
      "Professional Certification": 'bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-400',
    };
    return colors[type] || 'bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400';
  };

  return (
    <Card 
      className={cn(
        "transition-all duration-200 cursor-pointer hover:shadow-lg",
        credential.revoked && "opacity-60 border-red-200 dark:border-red-900",
        isHovered && "scale-[1.02]"
      )}
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => setIsHovered(false)}
    >
      {/* Header */}
      <CardHeader className="pb-3">
        <div className="flex items-start justify-between">
          <div className="flex items-center space-x-3 flex-1 min-w-0">
            <div className="h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0">
              <Award className="h-6 w-6 text-primary" />
            </div>
            <div className="flex-1 min-w-0">
              <div className="flex items-center space-x-2 mb-1">
                <Badge className={getTypeColor(credential.credentialType)}>
                  {credential.credentialType}
                </Badge>
                <Badge variant={status.variant}>
                  <StatusIcon className="h-3 w-3 mr-1" />
                  {status.label}
                </Badge>
              </div>
              <h3 className="font-semibold text-lg truncate">
                {credential.degreeName || 'Academic Credential'}
              </h3>
              {credential.fieldOfStudy && (
                <p className="text-sm text-muted-foreground truncate">
                  {credential.fieldOfStudy}
                </p>
              )}
            </div>
          </div>
        </div>
      </CardHeader>

      {/* Content */}
      <CardContent className="space-y-4">
        {/* Issuer Info */}
        <div className="flex items-center space-x-2 text-sm">
          <Building2 className="h-4 w-4 text-muted-foreground flex-shrink-0" />
          <span className="text-muted-foreground">Issued by:</span>
          <span className="font-medium truncate">
            {credential.issuerName || `${credential.issuer.slice(0, 8)}...${credential.issuer.slice(-6)}`}
          </span>
        </div>

        {/* Date Info */}
        <div className="grid grid-cols-2 gap-3 text-sm">
          <div className="flex items-center space-x-2">
            <Calendar className="h-4 w-4 text-muted-foreground flex-shrink-0" />
            <div>
              <p className="text-xs text-muted-foreground">Issued</p>
              <p className="font-medium">{formatDate(credential.issuedAt)}</p>
            </div>
          </div>
          {credential.expiresAt && (
            <div className="flex items-center space-x-2">
              <Calendar className="h-4 w-4 text-muted-foreground flex-shrink-0" />
              <div>
                <p className="text-xs text-muted-foreground">Expires</p>
                <p className="font-medium">{formatDate(credential.expiresAt)}</p>
              </div>
            </div>
          )}
        </div>

        {/* Credential Hash Preview */}
        <div className="flex items-center space-x-2 text-xs">
          <FileText className="h-3 w-3 text-muted-foreground flex-shrink-0" />
          <span className="text-muted-foreground">Hash:</span>
          <code className="font-mono text-xs bg-muted px-2 py-0.5 rounded truncate">
            {credential.credentialHash.slice(0, 12)}...{credential.credentialHash.slice(-8)}
          </code>
        </div>

        {/* Revoked Message */}
        {credential.revoked && (
          <div className="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3">
            <div className="flex items-start space-x-2">
              <AlertCircle className="h-4 w-4 text-red-600 dark:text-red-500 flex-shrink-0 mt-0.5" />
              <div className="text-xs">
                <p className="font-semibold text-red-800 dark:text-red-400">Credential Revoked</p>
                <p className="text-red-700 dark:text-red-300 mt-1">
                  This credential has been revoked and is no longer valid.
                </p>
              </div>
            </div>
          </div>
        )}

        {/* Actions */}
        <div className="grid grid-cols-2 sm:grid-cols-4 gap-2 pt-3 border-t border-border">
          <Button
            variant="outline"
            size="sm"
            onClick={onViewDetails}
            className="text-xs"
          >
            <Eye className="h-3 w-3 mr-1" />
            View
          </Button>
          <Button
            variant="outline"
            size="sm"
            onClick={onVerify}
            className="text-xs"
          >
            <CheckCircle2 className="h-3 w-3 mr-1" />
            Verify
          </Button>
          <Button
            variant="outline"
            size="sm"
            onClick={onShare}
            className="text-xs"
          >
            <Share2 className="h-3 w-3 mr-1" />
            Share
          </Button>
          <Button
            variant="outline"
            size="sm"
            onClick={onDownload}
            className="text-xs"
          >
            <Download className="h-3 w-3 mr-1" />
            Export
          </Button>
        </div>
      </CardContent>
    </Card>
  );
}
</file>

<file path="src/components/credentials/CredentialDetailModal.tsx">
// src/components/credentials/CredentialDetailModal.tsx
import { 
    X, 
    Award, 
    Building2, 
    User, 
    Calendar, 
    FileText, 
    Hash, 
    ExternalLink,
    Copy,
    Download,
    Share2,
    CheckCircle2,
    AlertCircle,
    QrCode
  } from 'lucide-react';
  import { Modal } from '../ui/Modal';
  import { Button } from '../ui/Button';
  import { Badge } from '../ui/Badge';
  import { toast } from 'sonner';
  import type { Credential } from './CredentialCard';
  
  interface CredentialDetailModalProps {
    isOpen: boolean;
    onClose: () => void;
    credential: Credential | null;
  }
  
  export default function CredentialDetailModal({ 
    isOpen, 
    onClose, 
    credential 
  }: CredentialDetailModalProps) {
    if (!credential) return null;
  
    const formatDate = (timestamp: number) => {
      return new Date(timestamp).toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
    };
  
    const copyToClipboard = (text: string, label: string) => {
      navigator.clipboard.writeText(text);
      toast.success(`${label} copied to clipboard`);
    };
  
    const handleShare = () => {
      const shareUrl = `${window.location.origin}/verify?hash=${credential.credentialHash}`;
      copyToClipboard(shareUrl, 'Share link');
    };
  
    const handleDownload = () => {
      const data = {
        id: credential.id,
        type: credential.credentialType,
        degreeName: credential.degreeName,
        fieldOfStudy: credential.fieldOfStudy,
        holder: credential.holder,
        issuer: credential.issuer,
        issuerName: credential.issuerName,
        credentialHash: credential.credentialHash,
        issuedAt: credential.issuedAt,
        expiresAt: credential.expiresAt,
        revoked: credential.revoked,
        metadata: credential.metadata,
        verificationUrl: `${window.location.origin}/verify?hash=${credential.credentialHash}`,
      };
  
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `credential-${credential.id}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      toast.success('Credential exported');
    };
  
    const getStatus = () => {
      if (credential.revoked) {
        return { label: 'Revoked', variant: 'error' as const, icon: AlertCircle };
      }
      if (credential.expiresAt && credential.expiresAt < Date.now()) {
        return { label: 'Expired', variant: 'warning' as const, icon: AlertCircle };
      }
      return { label: 'Active', variant: 'success' as const, icon: CheckCircle2 };
    };
  
    const status = getStatus();
    const StatusIcon = status.icon;
  
    return (
      <Modal isOpen={isOpen} onClose={onClose} className="max-w-3xl">
        <div className="relative">
          {/* Header */}
          <div className="flex items-start justify-between p-6 border-b border-border">
            <div className="flex items-center space-x-4 flex-1">
              <div className="h-16 w-16 rounded-xl bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center">
                <Award className="h-8 w-8 text-white" />
              </div>
              <div className="flex-1">
                <div className="flex items-center space-x-2 mb-2">
                  <h2 className="text-2xl font-bold">
                    {credential.degreeName || 'Academic Credential'}
                  </h2>
                </div>
                <div className="flex items-center space-x-2">
                  <Badge variant={status.variant}>
                    <StatusIcon className="h-3 w-3 mr-1" />
                    {status.label}
                  </Badge>
                  <Badge variant="outline">{credential.credentialType}</Badge>
                </div>
              </div>
            </div>
            <Button
              variant="ghost"
              size="icon"
              onClick={onClose}
              className="rounded-full"
            >
              <X className="h-5 w-5" />
            </Button>
          </div>
  
          {/* Content */}
          <div className="p-6 space-y-6 max-h-[70vh] overflow-y-auto">
            {/* Credential Details */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              {/* Left Column */}
              <div className="space-y-4">
                {/* Field of Study */}
                {credential.fieldOfStudy && (
                  <div>
                    <label className="text-sm font-semibold text-muted-foreground">
                      Field of Study
                    </label>
                    <p className="text-base font-medium mt-1">{credential.fieldOfStudy}</p>
                  </div>
                )}
  
                {/* Holder */}
                <div>
                  <label className="text-sm font-semibold text-muted-foreground flex items-center">
                    <User className="h-3 w-3 mr-1" />
                    Credential Holder
                  </label>
                  <div className="flex items-center space-x-2 mt-1">
                    <code className="text-xs font-mono bg-muted px-2 py-1 rounded flex-1 truncate">
                      {credential.holder}
                    </code>
                    <Button
                      variant="ghost"
                      size="icon"
                      className="h-7 w-7"
                      onClick={() => copyToClipboard(credential.holder, 'Holder address')}
                    >
                      <Copy className="h-3 w-3" />
                    </Button>
                  </div>
                </div>
  
                {/* Issuer */}
                <div>
                  <label className="text-sm font-semibold text-muted-foreground flex items-center">
                    <Building2 className="h-3 w-3 mr-1" />
                    Issued By
                  </label>
                  <p className="text-base font-medium mt-1">
                    {credential.issuerName || 'Unknown Institution'}
                  </p>
                  <div className="flex items-center space-x-2 mt-1">
                    <code className="text-xs font-mono bg-muted px-2 py-1 rounded flex-1 truncate">
                      {credential.issuer}
                    </code>
                    <Button
                      variant="ghost"
                      size="icon"
                      className="h-7 w-7"
                      onClick={() => copyToClipboard(credential.issuer, 'Issuer address')}
                    >
                      <Copy className="h-3 w-3" />
                    </Button>
                  </div>
                </div>
              </div>
  
              {/* Right Column */}
              <div className="space-y-4">
                {/* Issue Date */}
                <div>
                  <label className="text-sm font-semibold text-muted-foreground flex items-center">
                    <Calendar className="h-3 w-3 mr-1" />
                    Issue Date
                  </label>
                  <p className="text-base font-medium mt-1">{formatDate(credential.issuedAt)}</p>
                </div>
  
                {/* Expiration Date */}
                {credential.expiresAt && (
                  <div>
                    <label className="text-sm font-semibold text-muted-foreground flex items-center">
                      <Calendar className="h-3 w-3 mr-1" />
                      Expiration Date
                    </label>
                    <p className="text-base font-medium mt-1">{formatDate(credential.expiresAt)}</p>
                  </div>
                )}
  
                {/* Credential ID */}
                <div>
                  <label className="text-sm font-semibold text-muted-foreground flex items-center">
                    <FileText className="h-3 w-3 mr-1" />
                    Credential ID
                  </label>
                  <div className="flex items-center space-x-2 mt-1">
                    <code className="text-xs font-mono bg-muted px-2 py-1 rounded flex-1 truncate">
                      {credential.id}
                    </code>
                    <Button
                      variant="ghost"
                      size="icon"
                      className="h-7 w-7"
                      onClick={() => copyToClipboard(credential.id, 'Credential ID')}
                    >
                      <Copy className="h-3 w-3" />
                    </Button>
                  </div>
                </div>
              </div>
            </div>
  
            {/* Credential Hash */}
            <div className="bg-accent rounded-lg p-4">
              <label className="text-sm font-semibold text-muted-foreground flex items-center mb-2">
                <Hash className="h-4 w-4 mr-1" />
                Credential Hash (Blake2)
              </label>
              <div className="flex items-center space-x-2">
                <code className="text-xs font-mono bg-background px-3 py-2 rounded flex-1 break-all">
                  {credential.credentialHash}
                </code>
                <Button
                  variant="outline"
                  size="sm"
                  onClick={() => copyToClipboard(credential.credentialHash, 'Credential hash')}
                >
                  <Copy className="h-3 w-3 mr-1" />
                  Copy
                </Button>
              </div>
              <p className="text-xs text-muted-foreground mt-2">
                This cryptographic hash uniquely identifies your credential on the blockchain
              </p>
            </div>
  
            {/* Metadata */}
            {credential.metadata && (
              <div>
                <label className="text-sm font-semibold text-muted-foreground mb-2 block">
                  Additional Information
                </label>
                <div className="bg-muted rounded-lg p-4">
                  <p className="text-sm whitespace-pre-wrap">{credential.metadata}</p>
                </div>
              </div>
            )}
  
            {/* Revoked Warning */}
            {credential.revoked && (
              <div className="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4">
                <div className="flex items-start space-x-3">
                  <AlertCircle className="h-5 w-5 text-red-600 dark:text-red-500 flex-shrink-0 mt-0.5" />
                  <div>
                    <p className="font-semibold text-red-800 dark:text-red-400">
                      Credential Revoked
                    </p>
                    <p className="text-sm text-red-700 dark:text-red-300 mt-1">
                      This credential has been revoked by the issuing institution and is no longer valid.
                      It should not be used for verification purposes.
                    </p>
                  </div>
                </div>
              </div>
            )}
  
            {/* Verification Info */}
            <div className="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
              <div className="flex items-start space-x-3">
                <CheckCircle2 className="h-5 w-5 text-blue-600 dark:text-blue-500 flex-shrink-0 mt-0.5" />
                <div className="flex-1">
                  <p className="font-semibold text-blue-800 dark:text-blue-400">
                    Blockchain Verified
                  </p>
                  <p className="text-sm text-blue-700 dark:text-blue-300 mt-1">
                    This credential is permanently recorded on the blockchain and can be verified by anyone.
                  </p>
                </div>
              </div>
            </div>
          </div>
  
          {/* Footer Actions */}
          <div className="flex flex-wrap gap-3 p-6 border-t border-border bg-accent/50">
            <Button onClick={handleShare} className="flex-1">
              <Share2 className="h-4 w-4 mr-2" />
              Share Credential
            </Button>
            <Button onClick={handleDownload} variant="outline" className="flex-1">
              <Download className="h-4 w-4 mr-2" />
              Export JSON
            </Button>
            <Button 
              variant="outline"
              onClick={() => window.open(`/verify?hash=${credential.credentialHash}`, '_blank')}
            >
              <ExternalLink className="h-4 w-4 mr-2" />
              Public Verification
            </Button>
          </div>
        </div>
      </Modal>
    );
  }
</file>

<file path="src/components/credentials/CredentialsList.tsx">
// src/components/credentials/CredentialsList.tsx
import { useState, useMemo } from 'react';
import { 
  Grid3x3, 
  List, 
  Search, 
  Filter,
  SortAsc,
  Award,
  Loader2
} from 'lucide-react';
import { Button } from '../ui/Button';
import { Input } from '../ui/Input';
import { Badge } from '../ui/Badge';
import CredentialCard, { Credential } from './CredentialCard';
import CredentialDetailModal from './CredentialDetailModal';
import { CREDENTIAL_TYPES, CREDENTIAL_STATUS } from '@/lib/utils/constants';

interface CredentialsListProps {
  credentials: Credential[];
  loading?: boolean;
  emptyMessage?: string;
}

type ViewMode = 'grid' | 'list';
type FilterStatus = 'all' | 'active' | 'revoked' | 'expired';
type SortOption = 'newest' | 'oldest' | 'name' | 'type';

export default function CredentialsList({ 
  credentials, 
  loading = false,
  emptyMessage = "No credentials yet"
}: CredentialsListProps) {
  const [viewMode, setViewMode] = useState<ViewMode>('grid');
  const [searchQuery, setSearchQuery] = useState('');
  const [filterStatus, setFilterStatus] = useState<FilterStatus>('all');
  const [filterType, setFilterType] = useState<string>('all');
  const [sortBy, setSortBy] = useState<SortOption>('newest');
  const [selectedCredential, setSelectedCredential] = useState<Credential | null>(null);
  const [showDetailModal, setShowDetailModal] = useState(false);

  // Filter and sort credentials
  const filteredCredentials = useMemo(() => {
    let result = [...credentials];

    // Search filter
    if (searchQuery) {
      result = result.filter(cred => 
        cred.degreeName?.toLowerCase().includes(searchQuery.toLowerCase()) ||
        cred.fieldOfStudy?.toLowerCase().includes(searchQuery.toLowerCase()) ||
        cred.issuerName?.toLowerCase().includes(searchQuery.toLowerCase()) ||
        cred.credentialType.toLowerCase().includes(searchQuery.toLowerCase())
      );
    }

    // Status filter
    if (filterStatus !== 'all') {
      result = result.filter(cred => {
        if (filterStatus === 'active') {
          return !cred.revoked && (!cred.expiresAt || cred.expiresAt > Date.now());
        }
        if (filterStatus === 'revoked') {
          return cred.revoked;
        }
        if (filterStatus === 'expired') {
          return !cred.revoked && cred.expiresAt && cred.expiresAt < Date.now();
        }
        return true;
      });
    }

    // Type filter
    if (filterType !== 'all') {
      result = result.filter(cred => cred.credentialType === filterType);
    }

    // Sort
    result.sort((a, b) => {
      switch (sortBy) {
        case 'newest':
          return b.issuedAt - a.issuedAt;
        case 'oldest':
          return a.issuedAt - b.issuedAt;
        case 'name':
          return (a.degreeName || '').localeCompare(b.degreeName || '');
        case 'type':
          return a.credentialType.localeCompare(b.credentialType);
        default:
          return 0;
      }
    });

    return result;
  }, [credentials, searchQuery, filterStatus, filterType, sortBy]);

  // Get credential counts by status
  const counts = useMemo(() => {
    return {
      total: credentials.length,
      active: credentials.filter(c => !c.revoked && (!c.expiresAt || c.expiresAt > Date.now())).length,
      revoked: credentials.filter(c => c.revoked).length,
      expired: credentials.filter(c => !c.revoked && c.expiresAt && c.expiresAt < Date.now()).length,
    };
  }, [credentials]);

  // Handle credential actions
  const handleViewDetails = (credential: Credential) => {
    setSelectedCredential(credential);
    setShowDetailModal(true);
  };

  const handleVerify = (credential: Credential) => {
    window.open(`/verify?hash=${credential.credentialHash}`, '_blank');
  };

  const handleShare = (credential: Credential) => {
    const shareUrl = `${window.location.origin}/verify?hash=${credential.credentialHash}`;
    navigator.clipboard.writeText(shareUrl);
    // Would show toast in real implementation
    alert('Share link copied to clipboard!');
  };

  const handleDownload = (credential: Credential) => {
    const data = {
      id: credential.id,
      type: credential.credentialType,
      degreeName: credential.degreeName,
      fieldOfStudy: credential.fieldOfStudy,
      holder: credential.holder,
      issuer: credential.issuer,
      credentialHash: credential.credentialHash,
      issuedAt: credential.issuedAt,
    };

    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `credential-${credential.id}.json`;
    a.click();
    URL.revokeObjectURL(url);
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center py-12">
        <div className="text-center">
          <Loader2 className="h-8 w-8 animate-spin mx-auto mb-3 text-primary" />
          <p className="text-muted-foreground">Loading credentials...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Stats Bar */}
      <div className="grid grid-cols-2 sm:grid-cols-4 gap-4">
        <div className="bg-accent rounded-lg p-4">
          <p className="text-sm text-muted-foreground">Total</p>
          <p className="text-2xl font-bold">{counts.total}</p>
        </div>
        <div className="bg-green-50 dark:bg-green-900/20 rounded-lg p-4">
          <p className="text-sm text-green-700 dark:text-green-400">Active</p>
          <p className="text-2xl font-bold text-green-800 dark:text-green-300">{counts.active}</p>
        </div>
        <div className="bg-red-50 dark:bg-red-900/20 rounded-lg p-4">
          <p className="text-sm text-red-700 dark:text-red-400">Revoked</p>
          <p className="text-2xl font-bold text-red-800 dark:text-red-300">{counts.revoked}</p>
        </div>
        <div className="bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4">
          <p className="text-sm text-yellow-700 dark:text-yellow-400">Expired</p>
          <p className="text-2xl font-bold text-yellow-800 dark:text-yellow-300">{counts.expired}</p>
        </div>
      </div>

      {/* Filters & Controls */}
      <div className="flex flex-col sm:flex-row gap-4">
        {/* Search */}
        <div className="flex-1">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
            <Input
              placeholder="Search credentials..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="pl-10"
            />
          </div>
        </div>

        {/* View Mode Toggle */}
        <div className="flex gap-2">
          <Button
            variant={viewMode === 'grid' ? 'default' : 'outline'}
            size="icon"
            onClick={() => setViewMode('grid')}
          >
            <Grid3x3 className="h-4 w-4" />
          </Button>
          <Button
            variant={viewMode === 'list' ? 'default' : 'outline'}
            size="icon"
            onClick={() => setViewMode('list')}
          >
            <List className="h-4 w-4" />
          </Button>
        </div>
      </div>

      {/* Filter Tabs */}
      <div className="flex flex-wrap gap-2">
        <Button
          variant={filterStatus === 'all' ? 'default' : 'outline'}
          size="sm"
          onClick={() => setFilterStatus('all')}
        >
          All ({counts.total})
        </Button>
        <Button
          variant={filterStatus === 'active' ? 'default' : 'outline'}
          size="sm"
          onClick={() => setFilterStatus('active')}
        >
          Active ({counts.active})
        </Button>
        <Button
          variant={filterStatus === 'revoked' ? 'default' : 'outline'}
          size="sm"
          onClick={() => setFilterStatus('revoked')}
        >
          Revoked ({counts.revoked})
        </Button>
        <Button
          variant={filterStatus === 'expired' ? 'default' : 'outline'}
          size="sm"
          onClick={() => setFilterStatus('expired')}
        >
          Expired ({counts.expired})
        </Button>

        <div className="ml-auto flex gap-2">
          {/* Type Filter */}
          <select
            value={filterType}
            onChange={(e) => setFilterType(e.target.value)}
            className="px-3 py-1.5 text-sm border border-input rounded-md bg-background"
          >
            <option value="all">All Types</option>
            {CREDENTIAL_TYPES.map(type => (
              <option key={type} value={type}>{type}</option>
            ))}
          </select>

          {/* Sort */}
          <select
            value={sortBy}
            onChange={(e) => setSortBy(e.target.value as SortOption)}
            className="px-3 py-1.5 text-sm border border-input rounded-md bg-background"
          >
            <option value="newest">Newest First</option>
            <option value="oldest">Oldest First</option>
            <option value="name">By Name</option>
            <option value="type">By Type</option>
          </select>
        </div>
      </div>

      {/* Results Count */}
      <div className="text-sm text-muted-foreground">
        Showing {filteredCredentials.length} of {credentials.length} credential{credentials.length !== 1 ? 's' : ''}
      </div>

      {/* Credentials Grid/List */}
      {filteredCredentials.length === 0 ? (
        <div className="text-center py-12">
          <Award className="h-12 w-12 mx-auto mb-3 text-muted-foreground opacity-50" />
          <p className="text-lg font-medium mb-1">
            {searchQuery || filterStatus !== 'all' || filterType !== 'all' 
              ? 'No credentials match your filters'
              : emptyMessage
            }
          </p>
          <p className="text-sm text-muted-foreground">
            {searchQuery || filterStatus !== 'all' || filterType !== 'all'
              ? 'Try adjusting your search or filters'
              : 'Credentials you receive will appear here'
            }
          </p>
        </div>
      ) : (
        <div className={
          viewMode === 'grid'
            ? 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6'
            : 'flex flex-col gap-4'
        }>
          {filteredCredentials.map((credential) => (
            <CredentialCard
              key={credential.id}
              credential={credential}
              onViewDetails={() => handleViewDetails(credential)}
              onVerify={() => handleVerify(credential)}
              onShare={() => handleShare(credential)}
              onDownload={() => handleDownload(credential)}
            />
          ))}
        </div>
      )}

      {/* Detail Modal */}
      <CredentialDetailModal
        isOpen={showDetailModal}
        onClose={() => setShowDetailModal(false)}
        credential={selectedCredential}
      />
    </div>
  );
}
</file>

<file path="src/components/credentials/index.ts">
export { default as IssueCredentialForm } from './IssueCredentialForm';
</file>

<file path="src/components/credentials/IssueCredentialForm.tsx">
import { useState } from 'react';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import { 
  Award, 
  Search, 
  Upload, 
  FileText, 
  CheckCircle2, 
  Loader2,
  User,
  Calendar,
  Hash,
  ArrowLeft,
  ArrowRight,
  GraduationCap
} from 'lucide-react';
import { Button } from '../ui/Button';
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from '../ui/Card';
import { Input } from '../ui/Input';
import { Badge } from '../ui/Badge';
import { toast } from 'sonner';
import { CREDENTIAL_TYPES } from '@/lib/utils/constants';
import { useDIDStore } from '@/store/did.store';

// Form validation schema
const issueCredentialSchema = z.object({
  // Recipient
  recipientDID: z.string()
    .min(10, 'Please enter a valid DID address')
    .startsWith('5', 'DID address must start with 5'),
  
  // Credential Type
  credentialType: z.enum(CREDENTIAL_TYPES),
  customType: z.string().optional(),
  
  // Credential Details
  degreeName: z.string()
    .min(3, 'Degree name is required')
    .max(200, 'Degree name too long'),
  fieldOfStudy: z.string()
    .min(2, 'Field of study is required'),
  major: z.string().optional(),
  minor: z.string().optional(),
  
  // Dates
  graduationDate: z.string()
    .min(1, 'Graduation date is required'),
  issueDate: z.string()
    .min(1, 'Issue date is required'),
  expirationDate: z.string().optional(),
  
  // Academic Details
  gpa: z.string().optional(),
  honors: z.string().optional(),
  
  // Additional
  referenceNumber: z.string().optional(),
  notes: z.string()
    .max(512, 'Notes must be less than 512 characters')
    .optional(),
});

type IssueCredentialFormData = z.infer<typeof issueCredentialSchema>;

interface IssueCredentialFormProps {
  onSuccess?: (credentialId: string) => void;
  onCancel?: () => void;
}

export default function IssueCredentialForm({ onSuccess, onCancel }: IssueCredentialFormProps) {
  const [step, setStep] = useState<1 | 2 | 3 | 4 | 5>(1);
  const [uploadedDocument, setUploadedDocument] = useState<File | null>(null);
  const [documentHash, setDocumentHash] = useState<string>('');
  const [recipientInfo, setRecipientInfo] = useState<{
    name?: string;
    status: 'active' | 'inactive' | 'not_found';
  } | null>(null);
  const [isSearching, setIsSearching] = useState(false);
  const [isSubmitting, setIsSubmitting] = useState(false);
  
  const { institutionName, didAddress } = useDIDStore();

  const { 
    register, 
    handleSubmit, 
    watch, 
    setValue,
    formState: { errors },
    trigger 
  } = useForm<IssueCredentialFormData>({
    resolver: zodResolver(issueCredentialSchema),
    defaultValues: {
      credentialType: "Bachelor's Degree",
      issueDate: new Date().toISOString().split('T')[0],
    },
  });

  const selectedCredentialType = watch('credentialType');
  const recipientDID = watch('recipientDID');

  // Search for recipient DID
  const searchRecipient = async () => {
    if (!recipientDID || recipientDID.length < 10) {
      toast.error('Please enter a valid DID address');
      return;
    }

    setIsSearching(true);
    
    try {
      // TODO: Replace with actual blockchain query
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      // Mock recipient data
      const mockRecipient = {
        name: 'John Doe',
        status: 'active' as const,
      };
      
      setRecipientInfo(mockRecipient);
      toast.success('Recipient found!');
    } catch (error) {
      setRecipientInfo({ status: 'not_found' });
      toast.error('Recipient not found');
    } finally {
      setIsSearching(false);
    }
  };

  // Handle document upload
  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    
    if (!file) return;
    
    // Validate file type
    if (file.type !== 'application/pdf') {
      toast.error('Only PDF files are allowed');
      return;
    }
    
    // Validate file size (10MB)
    if (file.size > 10 * 1024 * 1024) {
      toast.error('File size must be less than 10MB');
      return;
    }
    
    setUploadedDocument(file);
    
    // Generate hash
    const hash = await generateFileHash(file);
    setDocumentHash(hash);
    
    toast.success('Document uploaded successfully');
  };

  // Generate file hash (mock - replace with actual Blake2)
  const generateFileHash = async (file: File): Promise<string> => {
    return '0x' + Array(64).fill(0).map(() => 
      Math.floor(Math.random() * 16).toString(16)
    ).join('');
  };

  // Navigate steps
  const nextStep = async () => {
    let fieldsToValidate: (keyof IssueCredentialFormData)[] = [];
    
    if (step === 1) {
      if (!recipientInfo || recipientInfo.status !== 'active') {
        toast.error('Please search and verify the recipient first');
        return;
      }
    } else if (step === 2) {
      fieldsToValidate = ['credentialType', 'degreeName', 'fieldOfStudy'];
      if (selectedCredentialType === 'Other') {
        fieldsToValidate.push('customType');
      }
    } else if (step === 3) {
      fieldsToValidate = ['graduationDate', 'issueDate'];
    } else if (step === 4) {
      if (!uploadedDocument || !documentHash) {
        toast.error('Please upload a document');
        return;
      }
    }
    
    if (fieldsToValidate.length > 0) {
      const isValid = await trigger(fieldsToValidate);
      if (!isValid) return;
    }
    
    setStep((prev) => Math.min(prev + 1, 5) as 1 | 2 | 3 | 4 | 5);
  };

  const prevStep = () => {
    setStep((prev) => Math.max(prev - 1, 1) as 1 | 2 | 3 | 4 | 5);
  };

  // Submit credential
  const onSubmit = async (data: IssueCredentialFormData) => {
    if (step !== 5) return;
    
    setIsSubmitting(true);
    
    try {
      // TODO: Replace with actual blockchain transaction
      console.log('Issuing credential:', {
        ...data,
        issuer: didAddress,
        documentHash,
        recipientDID: data.recipientDID,
      });
      
      // Simulate transaction
      await new Promise(resolve => setTimeout(resolve, 2000));
      
      const credentialId = 'cred_' + Date.now();
      
      toast.success('Credential issued successfully!', {
        description: `Credential ID: ${credentialId}`,
      });
      
      onSuccess?.(credentialId);
    } catch (error) {
      console.error('Failed to issue credential:', error);
      toast.error('Failed to issue credential');
    } finally {
      setIsSubmitting(false);
    }
  };

  // Step 1: Search Recipient
  const renderStep1 = () => (
    <div className="space-y-6">
      <div className="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
        <div className="flex items-start space-x-3">
          <User className="h-5 w-5 text-blue-600 dark:text-blue-500 flex-shrink-0 mt-0.5" />
          <div className="text-sm">
            <p className="font-semibold text-blue-800 dark:text-blue-400">Find Recipient</p>
            <p className="text-blue-700 dark:text-blue-300 mt-1">
              Enter the recipient's DID address. They must have an active DID to receive credentials.
            </p>
          </div>
        </div>
      </div>

      <div>
        <label className="block text-sm font-semibold mb-2">
          Recipient DID Address *
        </label>
        <div className="flex space-x-2">
          <Input
            {...register('recipientDID')}
            placeholder="5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY"
            className={`flex-1 font-mono text-sm ${errors.recipientDID ? 'border-red-500' : ''}`}
          />
          <Button
            type="button"
            onClick={searchRecipient}
            disabled={isSearching}
          >
            {isSearching ? (
              <Loader2 className="h-4 w-4 animate-spin" />
            ) : (
              <Search className="h-4 w-4" />
            )}
          </Button>
        </div>
        {errors.recipientDID && (
          <p className="text-sm text-red-600 mt-1">{errors.recipientDID.message}</p>
        )}
      </div>

      {/* Recipient Info */}
      {recipientInfo && (
        <Card className={
          recipientInfo.status === 'active' 
            ? 'border-green-500 bg-green-50 dark:bg-green-900/20' 
            : 'border-red-500 bg-red-50 dark:bg-red-900/20'
        }>
          <CardContent className="pt-6">
            <div className="flex items-center justify-between">
              <div className="flex items-center space-x-3">
                {recipientInfo.status === 'active' ? (
                  <CheckCircle2 className="h-8 w-8 text-green-600" />
                ) : (
                  <User className="h-8 w-8 text-red-600" />
                )}
                <div>
                  {recipientInfo.status === 'active' ? (
                    <>
                      <p className="font-semibold text-green-900 dark:text-green-400">
                        {recipientInfo.name || 'Valid DID Found'}
                      </p>
                      <p className="text-sm text-green-700 dark:text-green-300">
                        Ready to receive credentials
                      </p>
                    </>
                  ) : (
                    <>
                      <p className="font-semibold text-red-900 dark:text-red-400">
                        DID Not Found
                      </p>
                      <p className="text-sm text-red-700 dark:text-red-300">
                        This DID does not exist or is inactive
                      </p>
                    </>
                  )}
                </div>
              </div>
              <Badge variant={recipientInfo.status === 'active' ? 'success' : 'error'}>
                {recipientInfo.status === 'active' ? 'Active' : 'Not Found'}
              </Badge>
            </div>
          </CardContent>
        </Card>
      )}
    </div>
  );

  // Step 2: Credential Details
  const renderStep2 = () => (
    <div className="space-y-6">
      <div>
        <label className="block text-sm font-semibold mb-2">
          Credential Type *
        </label>
        <select
          {...register('credentialType')}
          className="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"
        >
          {CREDENTIAL_TYPES.map((type) => (
            <option key={type} value={type}>{type}</option>
          ))}
        </select>
      </div>

      {selectedCredentialType === 'Other' && (
        <div>
          <label className="block text-sm font-semibold mb-2">
            Custom Credential Type *
          </label>
          <Input
            {...register('customType')}
            placeholder="Enter credential type"
            className={errors.customType ? 'border-red-500' : ''}
          />
          {errors.customType && (
            <p className="text-sm text-red-600 mt-1">{errors.customType.message}</p>
          )}
        </div>
      )}

      <div>
        <label className="block text-sm font-semibold mb-2">
          Degree/Certificate Name *
        </label>
        <Input
          {...register('degreeName')}
          placeholder="e.g., Bachelor of Science in Computer Science"
          className={errors.degreeName ? 'border-red-500' : ''}
        />
        {errors.degreeName && (
          <p className="text-sm text-red-600 mt-1">{errors.degreeName.message}</p>
        )}
      </div>

      <div>
        <label className="block text-sm font-semibold mb-2">
          Field of Study *
        </label>
        <Input
          {...register('fieldOfStudy')}
          placeholder="e.g., Computer Science"
          className={errors.fieldOfStudy ? 'border-red-500' : ''}
        />
        {errors.fieldOfStudy && (
          <p className="text-sm text-red-600 mt-1">{errors.fieldOfStudy.message}</p>
        )}
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label className="block text-sm font-semibold mb-2">
            Major (Optional)
          </label>
          <Input
            {...register('major')}
            placeholder="e.g., Software Engineering"
          />
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2">
            Minor (Optional)
          </label>
          <Input
            {...register('minor')}
            placeholder="e.g., Mathematics"
          />
        </div>
      </div>
    </div>
  );

  // Step 3: Academic Details
  const renderStep3 = () => (
    <div className="space-y-6">
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label className="block text-sm font-semibold mb-2">
            <Calendar className="inline h-4 w-4 mr-1" />
            Graduation Date *
          </label>
          <Input
            {...register('graduationDate')}
            type="date"
            className={errors.graduationDate ? 'border-red-500' : ''}
          />
          {errors.graduationDate && (
            <p className="text-sm text-red-600 mt-1">{errors.graduationDate.message}</p>
          )}
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2">
            <Calendar className="inline h-4 w-4 mr-1" />
            Issue Date *
          </label>
          <Input
            {...register('issueDate')}
            type="date"
            className={errors.issueDate ? 'border-red-500' : ''}
          />
          {errors.issueDate && (
            <p className="text-sm text-red-600 mt-1">{errors.issueDate.message}</p>
          )}
        </div>
      </div>

      <div>
        <label className="block text-sm font-semibold mb-2">
          Expiration Date (Optional)
        </label>
        <Input
          {...register('expirationDate')}
          type="date"
        />
        <p className="text-xs text-muted-foreground mt-1">
          Leave empty if credential doesn't expire
        </p>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label className="block text-sm font-semibold mb-2">
            GPA (Optional)
          </label>
          <Input
            {...register('gpa')}
            placeholder="e.g., 3.85"
          />
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2">
            Honors/Distinctions (Optional)
          </label>
          <Input
            {...register('honors')}
            placeholder="e.g., Summa Cum Laude"
          />
        </div>
      </div>

      <div>
        <label className="block text-sm font-semibold mb-2">
          Reference Number (Optional)
        </label>
        <Input
          {...register('referenceNumber')}
          placeholder="Internal reference or certificate number"
        />
      </div>
    </div>
  );

  // Step 4: Document Upload
  const renderStep4 = () => (
    <div className="space-y-6">
      <div className="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
        <div className="flex items-start space-x-3">
          <FileText className="h-5 w-5 text-blue-600 dark:text-blue-500 flex-shrink-0 mt-0.5" />
          <div className="text-sm">
            <p className="font-semibold text-blue-800 dark:text-blue-400">Upload Credential Document</p>
            <p className="text-blue-700 dark:text-blue-300 mt-1">
              Upload the official PDF document. A cryptographic hash will be generated and stored on-chain.
            </p>
          </div>
        </div>
      </div>

      {!uploadedDocument ? (
        <div>
          <label className="block text-sm font-semibold mb-2">
            Credential Document (PDF) *
          </label>
          <div className="border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary transition-colors">
            <input
              type="file"
              accept=".pdf"
              onChange={handleFileUpload}
              className="hidden"
              id="credential-upload"
            />
            <label htmlFor="credential-upload" className="cursor-pointer">
              <Upload className="h-12 w-12 mx-auto text-muted-foreground mb-4" />
              <p className="text-sm font-medium mb-1">
                Click to upload or drag and drop
              </p>
              <p className="text-xs text-muted-foreground">
                PDF only, up to 10MB
              </p>
            </label>
          </div>
        </div>
      ) : (
        <Card className="border-green-500 bg-green-50 dark:bg-green-900/20">
          <CardContent className="pt-6">
            <div className="space-y-3">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-3">
                  <FileText className="h-8 w-8 text-green-600" />
                  <div>
                    <p className="font-semibold">{uploadedDocument.name}</p>
                    <p className="text-sm text-muted-foreground">
                      {(uploadedDocument.size / 1024 / 1024).toFixed(2)} MB
                    </p>
                  </div>
                </div>
                <Button
                  variant="outline"
                  size="sm"
                  onClick={() => {
                    setUploadedDocument(null);
                    setDocumentHash('');
                  }}
                >
                  Remove
                </Button>
              </div>

              <div className="pt-3 border-t">
                <label className="text-xs font-semibold text-muted-foreground mb-1 block">
                  <Hash className="inline h-3 w-3 mr-1" />
                  Document Hash (Blake2)
                </label>
                <div className="flex items-center space-x-2">
                  <Input
                    value={documentHash}
                    readOnly
                    className="font-mono text-xs"
                  />
                  <Button
                    variant="outline"
                    size="sm"
                    onClick={() => {
                      navigator.clipboard.writeText(documentHash);
                      toast.success('Hash copied to clipboard');
                    }}
                  >
                    Copy
                  </Button>
                </div>
                <p className="text-xs text-muted-foreground mt-1">
                  This hash will be stored on the blockchain
                </p>
              </div>
            </div>
          </CardContent>
        </Card>
      )}

      <div>
        <label className="block text-sm font-semibold mb-2">
          Additional Notes (Optional)
        </label>
        <textarea
          {...register('notes')}
          placeholder="Any additional information about this credential..."
          className="flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm"
          maxLength={512}
        />
        {errors.notes && (
          <p className="text-sm text-red-600 mt-1">{errors.notes.message}</p>
        )}
      </div>
    </div>
  );

  // Step 5: Review & Submit
  const renderStep5 = () => {
    const formData = watch();
    
    return (
      <div className="space-y-6">
        <div className="bg-accent rounded-lg p-6 space-y-4">
          <h3 className="font-semibold text-lg mb-4">Review Credential</h3>
          
          {/* Recipient */}
          <div className="space-y-2">
            <p className="text-sm font-semibold text-muted-foreground">Recipient</p>
            <div className="bg-background rounded p-3">
              <p className="text-sm font-medium">{recipientInfo?.name || 'Recipient'}</p>
              <p className="text-xs font-mono text-muted-foreground mt-1">
                {formData.recipientDID}
              </p>
            </div>
          </div>

          {/* Credential Details */}
          <div className="space-y-2">
            <p className="text-sm font-semibold text-muted-foreground">Credential Details</p>
            <div className="bg-background rounded p-3 space-y-2">
              <div className="flex items-center justify-between">
                <span className="text-sm text-muted-foreground">Type:</span>
                <Badge>{formData.credentialType}</Badge>
              </div>
              <div className="flex justify-between">
                <span className="text-sm text-muted-foreground">Degree:</span>
                <span className="text-sm font-medium">{formData.degreeName}</span>
              </div>
              <div className="flex justify-between">
                <span className="text-sm text-muted-foreground">Field:</span>
                <span className="text-sm">{formData.fieldOfStudy}</span>
              </div>
              {formData.major && (
                <div className="flex justify-between">
                  <span className="text-sm text-muted-foreground">Major:</span>
                  <span className="text-sm">{formData.major}</span>
                </div>
              )}
              {formData.gpa && (
                <div className="flex justify-between">
                  <span className="text-sm text-muted-foreground">GPA:</span>
                  <span className="text-sm">{formData.gpa}</span>
                </div>
              )}
              {formData.honors && (
                <div className="flex justify-between">
                  <span className="text-sm text-muted-foreground">Honors:</span>
                  <span className="text-sm">{formData.honors}</span>
                </div>
              )}
            </div>
          </div>

          {/* Dates */}
          <div className="space-y-2">
            <p className="text-sm font-semibold text-muted-foreground">Important Dates</p>
            <div className="bg-background rounded p-3 space-y-2 text-sm">
              <div className="flex justify-between">
                <span className="text-muted-foreground">Graduation:</span>
                <span>{new Date(formData.graduationDate).toLocaleDateString()}</span>
              </div>
              <div className="flex justify-between">
                <span className="text-muted-foreground">Issue Date:</span>
                <span>{new Date(formData.issueDate).toLocaleDateString()}</span>
              </div>
              {formData.expirationDate && (
                <div className="flex justify-between">
                  <span className="text-muted-foreground">Expires:</span>
                  <span>{new Date(formData.expirationDate).toLocaleDateString()}</span>
                </div>
              )}
            </div>
          </div>

          {/* Document */}
          <div className="space-y-2">
            <p className="text-sm font-semibold text-muted-foreground">Document</p>
            <div className="bg-background rounded p-3">
              <p className="text-sm">{uploadedDocument?.name}</p>
              <p className="text-xs font-mono text-muted-foreground mt-1 break-all">
                Hash: {documentHash}
              </p>
            </div>
          </div>

          {/* Issuer */}
          <div className="space-y-2">
            <p className="text-sm font-semibold text-muted-foreground">Issuer</p>
            <div className="bg-background rounded p-3">
              <p className="text-sm font-medium">{institutionName}</p>
              <p className="text-xs font-mono text-muted-foreground mt-1">
                {didAddress}
              </p>
            </div>
          </div>
        </div>

        <div className="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4">
          <div className="flex items-start space-x-3">
            <CheckCircle2 className="h-5 w-5 text-green-600 dark:text-green-500 flex-shrink-0 mt-0.5" />
            <div className="text-sm">
              <p className="font-semibold text-green-800 dark:text-green-400">Ready to Issue</p>
              <p className="text-green-700 dark:text-green-300 mt-1">
                Once submitted, the credential will be permanently recorded on the blockchain 
                and sent to the recipient's DID.
              </p>
            </div>
          </div>
        </div>
      </div>
    );
  };

  return (
    <Card className="max-w-3xl mx-auto">
      <CardHeader>
        <CardTitle className="flex items-center space-x-2">
          <Award className="h-6 w-6" />
          <span>Issue Academic Credential</span>
        </CardTitle>
        <CardDescription>
          Issue a verifiable academic credential to a student
        </CardDescription>
        
        {/* Progress Indicator */}
        <div className="flex items-center space-x-2 mt-4">
          {[1, 2, 3, 4, 5].map((s) => (
            <div key={s} className="flex items-center flex-1">
              <div
                className={`h-2 flex-1 rounded-full transition-colors ${
                  s <= step ? 'bg-primary' : 'bg-muted'
                }`}
              />
              {s < 5 && <div className="w-2" />}
            </div>
          ))}
        </div>
        <div className="flex justify-between text-xs text-muted-foreground mt-2">
          <span>Recipient</span>
          <span>Details</span>
          <span>Academic</span>
          <span>Document</span>
          <span>Review</span>
        </div>
      </CardHeader>

      <CardContent>
        <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">
          {/* Step Content */}
          {step === 1 && renderStep1()}
          {step === 2 && renderStep2()}
          {step === 3 && renderStep3()}
          {step === 4 && renderStep4()}
          {step === 5 && renderStep5()}

          {/* Navigation Buttons */}
          <div className="flex justify-between pt-6 border-t">
            <div>
              {step > 1 && (
                <Button
                  type="button"
                  variant="outline"
                  onClick={prevStep}
                >
                  <ArrowLeft className="h-4 w-4 mr-2" />
                  Previous
                </Button>
              )}
              {onCancel && step === 1 && (
                <Button
                  type="button"
                  variant="outline"
                  onClick={onCancel}
                >
                  Cancel
                </Button>
              )}
            </div>

            <div>
              {step < 5 ? (
                <Button
                  type="button"
                  onClick={nextStep}
                >
                  Next
                  <ArrowRight className="h-4 w-4 ml-2" />
                </Button>
              ) : (
                <Button
                  type="submit"
                  disabled={isSubmitting}
                >
                  {isSubmitting ? (
                    <>
                      <Loader2 className="h-4 w-4 mr-2 animate-spin" />
                      Issuing...
                    </>
                  ) : (
                    <>
                      <GraduationCap className="h-4 w-4 mr-2" />
                      Issue Credential
                    </>
                  )}
                </Button>
              )}
            </div>
          </div>
        </form>
      </CardContent>
    </Card>
  );
}
</file>

<file path="src/components/credentials/VerifyCredential.tsx">
// src/components/credentials/VerifyCredential.tsx
import { useState, useEffect } from 'react';
import { 
  Search, 
  Upload, 
  QrCode, 
  CheckCircle2, 
  XCircle, 
  AlertCircle,
  Loader2,
  FileText,
  Hash,
  Building2,
  Calendar,
  User,
  ExternalLink,
  Download,
  Shield,
  Award
} from 'lucide-react';
import { Button } from '../ui/Button';
import { Input } from '../ui/Input';
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from '../ui/Card';
import { Badge } from '../ui/Badge';
import { toast } from 'sonner';

interface VerificationResult {
  found: boolean;
  credential?: {
    id: string;
    holder: string;
    issuer: string;
    issuerName?: string;
    credentialHash: string;
    credentialType: string;
    degreeName?: string;
    fieldOfStudy?: string;
    issuedAt: number;
    expiresAt?: number;
    revoked: boolean;
    metadata?: string;
  };
  blockNumber?: number;
  timestamp?: number;
}

type VerificationMethod = 'hash' | 'file' | 'qr';

interface VerifyCredentialProps {
  initialHash?: string;
}

export default function VerifyCredential({ initialHash }: VerifyCredentialProps = {}) {
  const [method, setMethod] = useState<VerificationMethod>('hash');
  const [hashInput, setHashInput] = useState(initialHash || '');
  const [isVerifying, setIsVerifying] = useState(false);
  const [verificationResult, setVerificationResult] = useState<VerificationResult | null>(null);
  const [uploadedFile, setUploadedFile] = useState<File | null>(null);

  // Auto-verify if initial hash is provided
  useEffect(() => {
    if (initialHash && initialHash.length > 10) {
      verifyByHash(initialHash);
    }
  }, [initialHash]);

  // Verify credential by hash
  const verifyByHash = async (hash: string) => {
    if (!hash || hash.length < 10) {
      toast.error('Please enter a valid credential hash');
      return;
    }

    setIsVerifying(true);
    setVerificationResult(null);

    try {
      // TODO: Replace with actual blockchain query
      await new Promise(resolve => setTimeout(resolve, 1500));

      // Mock verification result
      const mockResult: VerificationResult = {
        found: true,
        credential: {
          id: 'cred_' + Math.random().toString(36).substr(2, 9),
          holder: '5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY',
          issuer: '5FHneW46xGXgs5mUiveU4sbTyGBzmstUspZC92UhjJM694ty',
          issuerName: 'Massachusetts Institute of Technology',
          credentialHash: hash,
          credentialType: "Bachelor's Degree",
          degreeName: 'Bachelor of Science in Computer Science',
          fieldOfStudy: 'Computer Science',
          issuedAt: Date.now() - 365 * 24 * 60 * 60 * 1000,
          revoked: false,
          metadata: 'Graduated with honors. GPA: 3.85',
        },
        blockNumber: 12345678,
        timestamp: Date.now() - 365 * 24 * 60 * 60 * 1000,
      };

      setVerificationResult(mockResult);
      toast.success('Credential verified successfully');
    } catch (error) {
      console.error('Verification failed:', error);
      setVerificationResult({ found: false });
      toast.error('Verification failed');
    } finally {
      setIsVerifying(false);
    }
  };

  // Handle file upload
  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (!file) return;

    if (!file.type.includes('json') && !file.type.includes('pdf')) {
      toast.error('Please upload a JSON or PDF file');
      return;
    }

    setUploadedFile(file);

    try {
      const text = await file.text();
      const data = JSON.parse(text);
      
      if (data.credentialHash) {
        setHashInput(data.credentialHash);
        await verifyByHash(data.credentialHash);
      } else {
        toast.error('No credential hash found in file');
      }
    } catch (error) {
      toast.error('Failed to read file');
    }
  };

  // Handle form submit
  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    verifyByHash(hashInput);
  };

  // Format date
  const formatDate = (timestamp: number) => {
    return new Date(timestamp).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
    });
  };

  // Get verification status
  const getVerificationStatus = () => {
    if (!verificationResult) return null;

    if (!verificationResult.found) {
      return {
        icon: XCircle,
        title: 'Credential Not Found',
        description: 'This credential does not exist in the blockchain',
        color: 'text-red-600',
        bgColor: 'bg-red-50 dark:bg-red-900/20',
        borderColor: 'border-red-200 dark:border-red-800',
      };
    }

    const cred = verificationResult.credential!;

    if (cred.revoked) {
      return {
        icon: AlertCircle,
        title: 'Credential Revoked',
        description: 'This credential has been revoked and is no longer valid',
        color: 'text-orange-600',
        bgColor: 'bg-orange-50 dark:bg-orange-900/20',
        borderColor: 'border-orange-200 dark:border-orange-800',
      };
    }

    if (cred.expiresAt && cred.expiresAt < Date.now()) {
      return {
        icon: AlertCircle,
        title: 'Credential Expired',
        description: 'This credential has expired',
        color: 'text-yellow-600',
        bgColor: 'bg-yellow-50 dark:bg-yellow-900/20',
        borderColor: 'border-yellow-200 dark:border-yellow-800',
      };
    }

    return {
      icon: CheckCircle2,
      title: 'Valid Credential',
      description: 'This credential is authentic and active',
      color: 'text-green-600',
      bgColor: 'bg-green-50 dark:bg-green-900/20',
      borderColor: 'border-green-200 dark:border-green-800',
    };
  };

  const status = getVerificationStatus();

  return (
    <div className="space-y-8">
      {/* Verification Methods */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center">
            <Shield className="h-6 w-6 mr-2 text-primary" />
            Verify Academic Credential
          </CardTitle>
          <CardDescription>
            Enter a credential hash, upload a credential file, or scan a QR code to verify authenticity
          </CardDescription>
        </CardHeader>
        <CardContent className="space-y-6">
          {/* Method Tabs */}
          <div className="flex space-x-2 border-b border-border">
            <button
              onClick={() => setMethod('hash')}
              className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${
                method === 'hash'
                  ? 'border-primary text-primary'
                  : 'border-transparent text-muted-foreground hover:text-foreground'
              }`}
            >
              <Hash className="inline h-4 w-4 mr-1" />
              Hash Input
            </button>
            <button
              onClick={() => setMethod('file')}
              className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${
                method === 'file'
                  ? 'border-primary text-primary'
                  : 'border-transparent text-muted-foreground hover:text-foreground'
              }`}
            >
              <Upload className="inline h-4 w-4 mr-1" />
              File Upload
            </button>
            <button
              onClick={() => setMethod('qr')}
              className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${
                method === 'qr'
                  ? 'border-primary text-primary'
                  : 'border-transparent text-muted-foreground hover:text-foreground'
              }`}
            >
              <QrCode className="inline h-4 w-4 mr-1" />
              QR Code
            </button>
          </div>

          {/* Hash Input Method */}
          {method === 'hash' && (
            <form onSubmit={handleSubmit} className="space-y-4">
              <div>
                <label className="block text-sm font-semibold mb-2">
                  Credential Hash
                </label>
                <div className="flex space-x-2">
                  <Input
                    type="text"
                    placeholder="Enter credential hash (0x...)"
                    value={hashInput}
                    onChange={(e) => setHashInput(e.target.value)}
                    className="flex-1 font-mono text-sm"
                  />
                  <Button
                    type="submit"
                    disabled={isVerifying || !hashInput}
                  >
                    {isVerifying ? (
                      <>
                        <Loader2 className="h-4 w-4 mr-2 animate-spin" />
                        Verifying...
                      </>
                    ) : (
                      <>
                        <Search className="h-4 w-4 mr-2" />
                        Verify
                      </>
                    )}
                  </Button>
                </div>
                <p className="text-xs text-muted-foreground mt-2">
                  The credential hash is a unique identifier stored on the blockchain
                </p>
              </div>
            </form>
          )}

          {/* File Upload Method */}
          {method === 'file' && (
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-semibold mb-2">
                  Upload Credential File
                </label>
                <div className="border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary transition-colors">
                  <input
                    type="file"
                    accept=".json,.pdf"
                    onChange={handleFileUpload}
                    className="hidden"
                    id="credential-file-upload"
                  />
                  <label htmlFor="credential-file-upload" className="cursor-pointer">
                    <Upload className="h-12 w-12 mx-auto text-muted-foreground mb-4" />
                    <p className="text-sm font-medium mb-1">
                      Click to upload or drag and drop
                    </p>
                    <p className="text-xs text-muted-foreground">
                      JSON or PDF files only
                    </p>
                  </label>
                </div>
                {uploadedFile && (
                  <div className="flex items-center space-x-2 mt-3 text-sm">
                    <FileText className="h-4 w-4 text-primary" />
                    <span>{uploadedFile.name}</span>
                    <button
                      onClick={() => setUploadedFile(null)}
                      className="text-red-600 hover:underline ml-auto"
                    >
                      Remove
                    </button>
                  </div>
                )}
              </div>
            </div>
          )}

          {/* QR Code Method */}
          {method === 'qr' && (
            <div className="space-y-4">
              <div className="border-2 border-dashed border-border rounded-lg p-8 text-center">
                <QrCode className="h-16 w-16 mx-auto text-muted-foreground mb-4" />
                <p className="text-sm font-medium mb-2">
                  QR Code Scanner
                </p>
                <p className="text-xs text-muted-foreground mb-4">
                  Scan a credential QR code to verify
                </p>
                <Button variant="outline" disabled>
                  <QrCode className="h-4 w-4 mr-2" />
                  Open Camera (Coming Soon)
                </Button>
              </div>
            </div>
          )}
        </CardContent>
      </Card>

      {/* Verification Result */}
      {verificationResult && status && (
        <Card className={`${status.borderColor} border-2`}>
          <CardContent className="pt-6">
            <div className={`${status.bgColor} rounded-lg p-6 space-y-6`}>
              {/* Status Header */}
              <div className="flex items-center space-x-4">
                <div className={`h-16 w-16 rounded-full ${status.bgColor} flex items-center justify-center`}>
                  <status.icon className={`h-8 w-8 ${status.color}`} />
                </div>
                <div className="flex-1">
                  <h3 className={`text-2xl font-bold ${status.color}`}>
                    {status.title}
                  </h3>
                  <p className="text-sm text-muted-foreground mt-1">
                    {status.description}
                  </p>
                </div>
              </div>

              {/* Credential Details (if found) */}
              {verificationResult.found && verificationResult.credential && (
                <div className="space-y-6 pt-6 border-t border-border">
                  {/* Main Info */}
                  <div className="bg-background rounded-lg p-6 space-y-4">
                    <div className="flex items-start justify-between">
                      <div className="flex-1">
                        <div className="flex items-center space-x-2 mb-3">
                          <Badge variant="outline" className="text-sm">
                            {verificationResult.credential.credentialType}
                          </Badge>
                          {verificationResult.credential.revoked ? (
                            <Badge variant="error">Revoked</Badge>
                          ) : verificationResult.credential.expiresAt && verificationResult.credential.expiresAt < Date.now() ? (
                            <Badge variant="warning">Expired</Badge>
                          ) : (
                            <Badge variant="success">Active</Badge>
                          )}
                        </div>
                        <h4 className="text-xl font-bold mb-2">
                          {verificationResult.credential.degreeName || 'Academic Credential'}
                        </h4>
                        {verificationResult.credential.fieldOfStudy && (
                          <p className="text-muted-foreground">
                            {verificationResult.credential.fieldOfStudy}
                          </p>
                        )}
                      </div>
                      <Award className="h-12 w-12 text-primary opacity-20" />
                    </div>

                    {/* Details Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t">
                      {/* Issuer */}
                      <div>
                        <label className="text-sm font-semibold text-muted-foreground flex items-center mb-2">
                          <Building2 className="h-3 w-3 mr-1" />
                          Issued By
                        </label>
                        <p className="font-medium">
                          {verificationResult.credential.issuerName || 'Unknown Institution'}
                        </p>
                        <code className="text-xs font-mono text-muted-foreground block mt-1 truncate">
                          {verificationResult.credential.issuer}
                        </code>
                      </div>

                      {/* Holder */}
                      <div>
                        <label className="text-sm font-semibold text-muted-foreground flex items-center mb-2">
                          <User className="h-3 w-3 mr-1" />
                          Credential Holder
                        </label>
                        <code className="text-xs font-mono block truncate">
                          {verificationResult.credential.holder}
                        </code>
                      </div>

                      {/* Issue Date */}
                      <div>
                        <label className="text-sm font-semibold text-muted-foreground flex items-center mb-2">
                          <Calendar className="h-3 w-3 mr-1" />
                          Issue Date
                        </label>
                        <p className="font-medium">
                          {formatDate(verificationResult.credential.issuedAt)}
                        </p>
                      </div>

                      {/* Expiration Date */}
                      {verificationResult.credential.expiresAt && (
                        <div>
                          <label className="text-sm font-semibold text-muted-foreground flex items-center mb-2">
                            <Calendar className="h-3 w-3 mr-1" />
                            Expiration Date
                          </label>
                          <p className="font-medium">
                            {formatDate(verificationResult.credential.expiresAt)}
                          </p>
                        </div>
                      )}
                    </div>

                    {/* Metadata */}
                    {verificationResult.credential.metadata && (
                      <div className="pt-4 border-t">
                        <label className="text-sm font-semibold text-muted-foreground mb-2 block">
                          Additional Information
                        </label>
                        <p className="text-sm">{verificationResult.credential.metadata}</p>
                      </div>
                    )}

                    {/* Credential Hash */}
                    <div className="pt-4 border-t">
                      <label className="text-sm font-semibold text-muted-foreground flex items-center mb-2">
                        <Hash className="h-3 w-3 mr-1" />
                        Credential Hash
                      </label>
                      <code className="text-xs font-mono bg-muted px-3 py-2 rounded block break-all">
                        {verificationResult.credential.credentialHash}
                      </code>
                    </div>
                  </div>

                  {/* Blockchain Info */}
                  <div className="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
                    <div className="flex items-start space-x-3">
                      <Shield className="h-5 w-5 text-blue-600 dark:text-blue-500 flex-shrink-0 mt-0.5" />
                      <div>
                        <p className="font-semibold text-blue-800 dark:text-blue-400">
                          Blockchain Verified
                        </p>
                        <p className="text-sm text-blue-700 dark:text-blue-300 mt-1">
                          This credential is permanently recorded on the blockchain.
                          {verificationResult.blockNumber && (
                            <> Verified at block #{verificationResult.blockNumber.toLocaleString()}</>
                          )}
                        </p>
                      </div>
                    </div>
                  </div>

                  {/* Actions */}
                  <div className="flex flex-wrap gap-3">
                    <Button
                      variant="outline"
                      onClick={() => {
                        const data = JSON.stringify(verificationResult.credential, null, 2);
                        const blob = new Blob([data], { type: 'application/json' });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = 'verification-report.json';
                        a.click();
                        URL.revokeObjectURL(url);
                      }}
                    >
                      <Download className="h-4 w-4 mr-2" />
                      Download Report
                    </Button>
                    <Button
                      variant="outline"
                      onClick={() => {
                        window.print();
                      }}
                    >
                      <FileText className="h-4 w-4 mr-2" />
                      Print
                    </Button>
                  </div>
                </div>
              )}

              {/* Not Found Message */}
              {!verificationResult.found && (
                <div className="space-y-4">
                  <div className="text-center py-6">
                    <p className="text-muted-foreground">
                      No credential found with this hash. Possible reasons:
                    </p>
                    <ul className="text-sm text-muted-foreground mt-4 space-y-2 text-left max-w-md mx-auto">
                      <li className="flex items-start">
                        <span className="mr-2"></span>
                        <span>The credential has not been issued yet</span>
                      </li>
                      <li className="flex items-start">
                        <span className="mr-2"></span>
                        <span>The hash is incorrect or incomplete</span>
                      </li>
                      <li className="flex items-start">
                        <span className="mr-2"></span>
                        <span>The credential was issued on a different network</span>
                      </li>
                    </ul>
                  </div>
                </div>
              )}
            </div>
          </CardContent>
        </Card>
      )}

      {/* Info Section */}
      {!verificationResult && (
        <Card>
          <CardHeader>
            <CardTitle className="text-lg">How Verification Works</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div>
                <div className="h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center mb-3">
                  <Shield className="h-6 w-6 text-primary" />
                </div>
                <h4 className="font-semibold mb-2">Blockchain Security</h4>
                <p className="text-sm text-muted-foreground">
                  All credentials are cryptographically secured and stored on the blockchain, making them tamper-proof.
                </p>
              </div>
              <div>
                <div className="h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center mb-3">
                  <CheckCircle2 className="h-6 w-6 text-primary" />
                </div>
                <h4 className="font-semibold mb-2">Instant Verification</h4>
                <p className="text-sm text-muted-foreground">
                  Verify any credential in seconds without needing to contact the issuing institution.
                </p>
              </div>
              <div>
                <div className="h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center mb-3">
                  <ExternalLink className="h-6 w-6 text-primary" />
                </div>
                <h4 className="font-semibold mb-2">Public Access</h4>
                <p className="text-sm text-muted-foreground">
                  Anyone can verify credentials without creating an account or connecting a wallet.
                </p>
              </div>
            </div>
          </CardContent>
        </Card>
      )}
    </div>
  );
}
</file>

<file path="src/components/did/CreateDIDForm.tsx">
import { useState } from 'react';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import { Key, Copy, Download, Eye, EyeOff, AlertTriangle, CheckCircle2, Loader2 } from 'lucide-react';
import { Button } from '../ui/Button';
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from '../ui/Card';
import { Input } from '../ui/Input';
import { Badge } from '../ui/Badge';
import { toast } from 'sonner';

// Form validation schema
const createDIDSchema = z.object({
  keyType: z.enum(['Ed25519', 'Sr25519', 'ECDSA']),
  backupConfirmed: z.boolean().refine(val => val === true, {
    message: 'You must confirm that you have backed up your keys',
  }),
});

type CreateDIDFormData = z.infer<typeof createDIDSchema>;

// Key types with descriptions
const KEY_TYPES = [
  {
    value: 'Ed25519',
    name: 'Ed25519',
    description: 'Recommended - Fast and secure',
    recommended: true,
  },
  {
    value: 'Sr25519',
    name: 'Sr25519',
    description: 'Substrate native - More features',
    recommended: false,
  },
  {
    value: 'ECDSA',
    name: 'ECDSA',
    description: 'Ethereum compatible',
    recommended: false,
  },
] as const;

interface CreateDIDFormProps {
  onSuccess?: (did: string) => void;
  onCancel?: () => void;
}

export default function CreateDIDForm({ onSuccess, onCancel }: CreateDIDFormProps) {
  const [step, setStep] = useState<'select' | 'generate' | 'backup' | 'confirm' | 'submit'>('select');
  const [generatedKeys, setGeneratedKeys] = useState<{
    publicKey: string;
    mnemonic: string;
    address: string;
  } | null>(null);
  const [showMnemonic, setShowMnemonic] = useState(false);
  const [isSubmitting, setIsSubmitting] = useState(false);

  const { register, handleSubmit, watch, formState: { errors } } = useForm<CreateDIDFormData>({
    resolver: zodResolver(createDIDSchema),
    defaultValues: {
      keyType: 'Ed25519',
      backupConfirmed: false,
    },
  });

  const selectedKeyType = watch('keyType');

  // Generate keys
  const generateKeys = async () => {
    try {
      setStep('generate');
      
      // Simulate key generation (replace with actual Polkadot key generation)
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      // Mock generated keys (replace with actual generation)
      const mockKeys = {
        publicKey: '0x' + Array(64).fill(0).map(() => Math.floor(Math.random() * 16).toString(16)).join(''),
        mnemonic: 'abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about',
        address: '5' + Array(47).fill(0).map(() => 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'[Math.floor(Math.random() * 62)]).join(''),
      };
      
      setGeneratedKeys(mockKeys);
      setStep('backup');
      toast.success('Keys generated successfully');
    } catch (error) {
      console.error('Failed to generate keys:', error);
      toast.error('Failed to generate keys');
      setStep('select');
    }
  };

  // Copy to clipboard
  const copyToClipboard = (text: string, label: string) => {
    navigator.clipboard.writeText(text);
    toast.success(`${label} copied to clipboard`);
  };

  // Download backup file
  const downloadBackup = () => {
    if (!generatedKeys) return;
    
    const backup = {
      publicKey: generatedKeys.publicKey,
      mnemonic: generatedKeys.mnemonic,
      address: generatedKeys.address,
      keyType: selectedKeyType,
      createdAt: new Date().toISOString(),
      warning: 'KEEP THIS FILE SECURE! Anyone with this information can control your DID.',
    };
    
    const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `did-backup-${Date.now()}.json`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    toast.success('Backup file downloaded');
  };

  // Submit DID creation to blockchain
  const onSubmit = async (data: CreateDIDFormData) => {
    if (!generatedKeys) return;
    
    setIsSubmitting(true);
    
    try {
      // TODO: Replace with actual blockchain transaction
      console.log('Creating DID with:', {
        keyType: data.keyType,
        publicKey: generatedKeys.publicKey,
        address: generatedKeys.address,
      });
      
      // Simulate transaction
      await new Promise(resolve => setTimeout(resolve, 2000));
      
      toast.success('DID created successfully!');
      onSuccess?.(generatedKeys.address);
    } catch (error) {
      console.error('Failed to create DID:', error);
      toast.error('Failed to create DID. Please try again.');
    } finally {
      setIsSubmitting(false);
    }
  };

  // Step 1: Select Key Type
  if (step === 'select') {
    return (
      <Card className="max-w-2xl mx-auto">
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Key className="h-6 w-6" />
            <span>Create Your DID</span>
          </CardTitle>
          <CardDescription>
            Choose a key type for your decentralized identifier
          </CardDescription>
        </CardHeader>
        <CardContent className="space-y-6">
          <div className="space-y-3">
            {KEY_TYPES.map((type) => (
              <label
                key={type.value}
                className={`
                  flex items-start p-4 border-2 rounded-lg cursor-pointer transition-all
                  ${selectedKeyType === type.value 
                    ? 'border-primary bg-primary/5' 
                    : 'border-border hover:border-primary/50'
                  }
                `}
              >
                <input
                  type="radio"
                  value={type.value}
                  {...register('keyType')}
                  className="mt-1"
                />
                <div className="ml-3 flex-1">
                  <div className="flex items-center space-x-2">
                    <span className="font-semibold">{type.name}</span>
                    {type.recommended && (
                      <Badge variant="success" className="text-xs">Recommended</Badge>
                    )}
                  </div>
                  <p className="text-sm text-muted-foreground mt-1">{type.description}</p>
                </div>
              </label>
            ))}
          </div>

          <div className="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4">
            <div className="flex items-start space-x-3">
              <AlertTriangle className="h-5 w-5 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5" />
              <div className="text-sm">
                <p className="font-semibold text-yellow-800 dark:text-yellow-400">Important Security Notice</p>
                <p className="text-yellow-700 dark:text-yellow-300 mt-1">
                  You will receive a recovery phrase. Write it down and store it safely. 
                  Anyone with this phrase can control your DID.
                </p>
              </div>
            </div>
          </div>

          <div className="flex justify-between">
            {onCancel && (
              <Button variant="outline" onClick={onCancel}>
                Cancel
              </Button>
            )}
            <Button onClick={generateKeys} className="ml-auto">
              Continue
            </Button>
          </div>
        </CardContent>
      </Card>
    );
  }

  // Step 2: Generating (Loading)
  if (step === 'generate') {
    return (
      <Card className="max-w-2xl mx-auto">
        <CardContent className="py-12">
          <div className="text-center space-y-4">
            <Loader2 className="h-12 w-12 animate-spin mx-auto text-primary" />
            <h3 className="text-xl font-semibold">Generating Your Keys...</h3>
            <p className="text-muted-foreground">This will only take a moment</p>
          </div>
        </CardContent>
      </Card>
    );
  }

  // Step 3 & 4: Backup Keys
  if (step === 'backup' || step === 'confirm') {
    return (
      <Card className="max-w-2xl mx-auto">
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Key className="h-6 w-6" />
            <span>Backup Your Keys</span>
          </CardTitle>
          <CardDescription>
            Save these keys securely. You'll need them to recover your DID.
          </CardDescription>
        </CardHeader>
        <CardContent className="space-y-6">
          {/* DID Address */}
          <div>
            <label className="text-sm font-semibold mb-2 block">Your DID Address</label>
            <div className="flex items-center space-x-2">
              <Input 
                value={generatedKeys?.address || ''} 
                readOnly 
                className="font-mono text-sm"
              />
              <Button
                variant="outline"
                size="icon"
                onClick={() => copyToClipboard(generatedKeys?.address || '', 'Address')}
              >
                <Copy className="h-4 w-4" />
              </Button>
            </div>
          </div>

          {/* Public Key */}
          <div>
            <label className="text-sm font-semibold mb-2 block">Public Key</label>
            <div className="flex items-center space-x-2">
              <Input 
                value={generatedKeys?.publicKey || ''} 
                readOnly 
                className="font-mono text-sm"
              />
              <Button
                variant="outline"
                size="icon"
                onClick={() => copyToClipboard(generatedKeys?.publicKey || '', 'Public key')}
              >
                <Copy className="h-4 w-4" />
              </Button>
            </div>
          </div>

          {/* Recovery Phrase */}
          <div>
            <label className="text-sm font-semibold mb-2 block">
              Recovery Phrase (Mnemonic)
            </label>
            <div className="space-y-2">
              <div className="relative">
                <Input 
                  value={generatedKeys?.mnemonic || ''} 
                  type={showMnemonic ? 'text' : 'password'}
                  readOnly 
                  className="font-mono text-sm pr-20"
                />
                <div className="absolute right-2 top-1/2 -translate-y-1/2 flex space-x-1">
                  <Button
                    variant="ghost"
                    size="icon"
                    className="h-8 w-8"
                    onClick={() => setShowMnemonic(!showMnemonic)}
                  >
                    {showMnemonic ? <EyeOff className="h-4 w-4" /> : <Eye className="h-4 w-4" />}
                  </Button>
                  <Button
                    variant="ghost"
                    size="icon"
                    className="h-8 w-8"
                    onClick={() => copyToClipboard(generatedKeys?.mnemonic || '', 'Recovery phrase')}
                  >
                    <Copy className="h-4 w-4" />
                  </Button>
                </div>
              </div>
            </div>
          </div>

          {/* Download Backup */}
          <Button
            variant="outline"
            className="w-full"
            onClick={downloadBackup}
          >
            <Download className="h-4 w-4 mr-2" />
            Download Backup File
          </Button>

          {/* Security Warning */}
          <div className="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4">
            <div className="flex items-start space-x-3">
              <AlertTriangle className="h-5 w-5 text-red-600 dark:text-red-500 flex-shrink-0 mt-0.5" />
              <div className="text-sm">
                <p className="font-semibold text-red-800 dark:text-red-400">Critical Security Warning</p>
                <ul className="text-red-700 dark:text-red-300 mt-2 space-y-1 list-disc list-inside">
                  <li>Never share your recovery phrase with anyone</li>
                  <li>Store it in a secure location (password manager, safe, etc.)</li>
                  <li>If you lose it, you cannot recover your DID</li>
                  <li>Anyone with this phrase can control your DID</li>
                </ul>
              </div>
            </div>
          </div>

          {/* Confirmation Checkbox */}
          <label className="flex items-start space-x-3 cursor-pointer">
            <input
              type="checkbox"
              {...register('backupConfirmed')}
              className="mt-1"
            />
            <span className="text-sm">
              I have securely backed up my recovery phrase and understand that I cannot recover 
              my DID without it. I accept full responsibility for keeping it safe.
            </span>
          </label>
          {errors.backupConfirmed && (
            <p className="text-sm text-red-600">{errors.backupConfirmed.message}</p>
          )}

          {/* Actions */}
          <div className="flex justify-between pt-4">
            <Button 
              variant="outline" 
              onClick={() => {
                setStep('select');
                setGeneratedKeys(null);
              }}
            >
              Start Over
            </Button>
            <Button
              onClick={handleSubmit(onSubmit)}
              disabled={isSubmitting}
            >
              {isSubmitting ? (
                <>
                  <Loader2 className="h-4 w-4 mr-2 animate-spin" />
                  Creating DID...
                </>
              ) : (
                <>
                  <CheckCircle2 className="h-4 w-4 mr-2" />
                  Create DID
                </>
              )}
            </Button>
          </div>
        </CardContent>
      </Card>
    );
  }

  return null;
}
</file>

<file path="src/components/did/CreateDIDModal.tsx">
import { Modal } from '../ui/Modal';
import CreateDIDForm from './CreateDIDForm';
import { useDIDStore } from '@/store/did.store';

interface CreateDIDModalProps {
  isOpen: boolean;
  onClose: () => void;
}

export default function CreateDIDModal({ isOpen, onClose }: CreateDIDModalProps) {
  const setDID = useDIDStore(state => state.setDID);

  const handleSuccess = (didAddress: string) => {
    // Update store with new DID
    setDID(didAddress, [{
      id: '1',
      keyType: 'Ed25519',
      publicKey: '0x...',
      addedAt: Date.now(),
    }]);
    
    // Close modal
    onClose();
  };

  return (
    <Modal
      isOpen={isOpen}
      onClose={onClose}
      className="max-w-3xl"
    >
      <CreateDIDForm 
        onSuccess={handleSuccess}
        onCancel={onClose}
      />
    </Modal>
  );
}
</file>

<file path="src/components/did/DIDStatus.tsx">
import { CheckCircle, Clock, AlertCircle, User } from 'lucide-react';
import { useDIDStore } from '@/store/did.store';
import { Badge } from '../ui/Badge';
import { DID_STATUS } from '@/lib/utils/constants';

export default function DIDStatus() {
  const { hasDID, status, isInstitution } = useDIDStore();

  const getStatusConfig = () => {
    switch (status) {
      case DID_STATUS.ACTIVE:
        return {
          icon: CheckCircle,
          text: 'Active',
          variant: 'success' as const,
          description: 'Your identity is active',
        };
      case DID_STATUS.INACTIVE:
        return {
          icon: AlertCircle,
          text: 'Inactive',
          variant: 'warning' as const,
          description: 'Your identity is deactivated',
        };
      case DID_STATUS.PENDING:
        return {
          icon: Clock,
          text: 'Pending',
          variant: 'warning' as const,
          description: 'Verification pending',
        };
      default:
        return {
          icon: User,
          text: 'No DID',
          variant: 'outline' as const,
          description: 'Create your DID to get started',
        };
    }
  };

  const config = getStatusConfig();
  const StatusIcon = config.icon;

  return (
    <div className="flex items-center space-x-3 p-3 rounded-lg bg-accent/50">
      <div className="h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center">
        <StatusIcon className="h-5 w-5 text-primary" />
      </div>
      <div className="flex-1 min-w-0">
        <div className="flex items-center space-x-2">
          <p className="text-sm font-medium truncate">
            {hasDID ? 'Identity' : 'No Identity'}
          </p>
          <Badge variant={config.variant} className="text-xs">
            {config.text}
          </Badge>
        </div>
        <p className="text-xs text-muted-foreground truncate">
          {config.description}
        </p>
        {isInstitution && (
          <Badge variant="secondary" className="mt-1 text-xs">
            Institution
          </Badge>
        )}
      </div>
    </div>
  );
}
</file>

<file path="src/components/did/index.ts">
export { default as DIDStatus } from './DIDStatus';
export { default as CreateDIDForm } from './CreateDIDForm';
export { default as CreateDIDModal } from './CreateDIDModal';
export { default as InstitutionRegistration } from './InstitutionRegistration';
</file>

<file path="src/components/did/InstitutionRegistration.tsx">
import { useState } from 'react';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import { 
  Building2, 
  Upload, 
  FileText, 
  CheckCircle2, 
  Loader2, 
  AlertCircle,
  ArrowLeft,
  ArrowRight,
  Globe,
  Mail,
  Phone,
  MapPin
} from 'lucide-react';
import { Button } from '../ui/Button';
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from '../ui/Card';
import { Input } from '../ui/Input';
import { Badge } from '../ui/Badge';
import { toast } from 'sonner';
import { INSTITUTION_TYPES } from '@/lib/utils/constants';
import { useDIDStore } from '@/store/did.store';

// Form validation schema
const institutionSchema = z.object({
  name: z.string()
    .min(3, 'Institution name must be at least 3 characters')
    .max(100, 'Institution name must be less than 100 characters'),
  type: z.enum(INSTITUTION_TYPES),
  description: z.string()
    .max(500, 'Description must be less than 500 characters')
    .optional(),
  country: z.string().min(2, 'Please select a country'),
  website: z.string().url('Please enter a valid URL'),
  
  // Contact information
  contactName: z.string().min(2, 'Contact name is required'),
  contactEmail: z.string().email('Please enter a valid email'),
  contactPhone: z.string().min(5, 'Please enter a valid phone number'),
  address: z.string().min(10, 'Please enter a complete address'),
  
  // Legal
  termsAccepted: z.boolean().refine(val => val === true, {
    message: 'You must accept the terms and conditions',
  }),
});

type InstitutionFormData = z.infer<typeof institutionSchema>;

interface InstitutionRegistrationProps {
  onSuccess?: () => void;
  onCancel?: () => void;
}

export default function InstitutionRegistration({ onSuccess, onCancel }: InstitutionRegistrationProps) {
  const [step, setStep] = useState<1 | 2 | 3 | 4>(1);
  const [uploadedDocs, setUploadedDocs] = useState<File[]>([]);
  const [docHashes, setDocHashes] = useState<string[]>([]);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const { didAddress } = useDIDStore();

  const { 
    register, 
    handleSubmit, 
    watch, 
    formState: { errors },
    trigger 
  } = useForm<InstitutionFormData>({
    resolver: zodResolver(institutionSchema),
    defaultValues: {
      type: 'University',
      termsAccepted: false,
    },
  });

  const selectedType = watch('type');

  // Handle document upload
  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const files = Array.from(e.target.files || []);
    
    if (files.length === 0) return;
    
    // Validate file types (PDF only for verification docs)
    const validFiles = files.filter(file => file.type === 'application/pdf');
    
    if (validFiles.length !== files.length) {
      toast.error('Only PDF files are allowed');
      return;
    }
    
    setUploadedDocs(prev => [...prev, ...validFiles]);
    
    // Generate hashes for each file
    for (const file of validFiles) {
      const hash = await generateFileHash(file);
      setDocHashes(prev => [...prev, hash]);
    }
    
    toast.success(`${validFiles.length} document(s) uploaded`);
  };

  // Generate file hash (mock - replace with actual Blake2)
  const generateFileHash = async (file: File): Promise<string> => {
    // Mock hash generation
    return '0x' + Array(64).fill(0).map(() => 
      Math.floor(Math.random() * 16).toString(16)
    ).join('');
  };

  // Remove uploaded document
  const removeDocument = (index: number) => {
    setUploadedDocs(prev => prev.filter((_, i) => i !== index));
    setDocHashes(prev => prev.filter((_, i) => i !== index));
    toast.success('Document removed');
  };

  // Navigate steps
  const nextStep = async () => {
    let fieldsToValidate: (keyof InstitutionFormData)[] = [];
    
    if (step === 1) {
      fieldsToValidate = ['name', 'type', 'description', 'country', 'website'];
    } else if (step === 3) {
      fieldsToValidate = ['contactName', 'contactEmail', 'contactPhone', 'address'];
    }
    
    const isValid = await trigger(fieldsToValidate);
    if (isValid) {
      setStep((prev) => Math.min(prev + 1, 4) as 1 | 2 | 3 | 4);
    }
  };

  const prevStep = () => {
    setStep((prev) => Math.max(prev - 1, 1) as 1 | 2 | 3 | 4);
  };

  // Submit registration
  const onSubmit = async (data: InstitutionFormData) => {
    if (step !== 4) return;
    
    setIsSubmitting(true);
    
    try {
      // TODO: Replace with actual blockchain transaction
      console.log('Registering institution:', {
        ...data,
        did: didAddress,
        documentHashes: docHashes,
      });
      
      // Simulate transaction
      await new Promise(resolve => setTimeout(resolve, 2000));
      
      // Update DID store to mark as institution
      useDIDStore.getState().setInstitution(data.name);
      
      toast.success('Institution registration submitted!', {
        description: 'Your application is pending verification',
      });
      
      onSuccess?.();
    } catch (error) {
      console.error('Failed to register institution:', error);
      toast.error('Failed to register institution');
    } finally {
      setIsSubmitting(false);
    }
  };

  // Step 1: Institution Information
  const renderStep1 = () => (
    <div className="space-y-6">
      <div>
        <label className="block text-sm font-semibold mb-2">
          Institution Name *
        </label>
        <Input
          {...register('name')}
          placeholder="e.g., University of Technology"
          className={errors.name ? 'border-red-500' : ''}
        />
        {errors.name && (
          <p className="text-sm text-red-600 mt-1">{errors.name.message}</p>
        )}
      </div>

      <div>
        <label className="block text-sm font-semibold mb-2">
          Institution Type *
        </label>
        <select
          {...register('type')}
          className="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"
        >
          {INSTITUTION_TYPES.map((type) => (
            <option key={type} value={type}>{type}</option>
          ))}
        </select>
      </div>

      <div>
        <label className="block text-sm font-semibold mb-2">
          Description (Optional)
        </label>
        <textarea
          {...register('description')}
          placeholder="Brief description of your institution..."
          className="flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm"
          maxLength={500}
        />
        {errors.description && (
          <p className="text-sm text-red-600 mt-1">{errors.description.message}</p>
        )}
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label className="block text-sm font-semibold mb-2">
            Country *
          </label>
          <Input
            {...register('country')}
            placeholder="e.g., United States"
            className={errors.country ? 'border-red-500' : ''}
          />
          {errors.country && (
            <p className="text-sm text-red-600 mt-1">{errors.country.message}</p>
          )}
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2">
            <Globe className="inline h-4 w-4 mr-1" />
            Website *
          </label>
          <Input
            {...register('website')}
            type="url"
            placeholder="https://example.edu"
            className={errors.website ? 'border-red-500' : ''}
          />
          {errors.website && (
            <p className="text-sm text-red-600 mt-1">{errors.website.message}</p>
          )}
        </div>
      </div>
    </div>
  );

  // Step 2: Verification Documents
  const renderStep2 = () => (
    <div className="space-y-6">
      <div className="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
        <div className="flex items-start space-x-3">
          <FileText className="h-5 w-5 text-blue-600 dark:text-blue-500 flex-shrink-0 mt-0.5" />
          <div className="text-sm">
            <p className="font-semibold text-blue-800 dark:text-blue-400">Required Documents</p>
            <p className="text-blue-700 dark:text-blue-300 mt-1">
              Please upload official documents to verify your institution's legitimacy:
            </p>
            <ul className="list-disc list-inside mt-2 space-y-1 text-blue-700 dark:text-blue-300">
              <li>Accreditation certificate</li>
              <li>Business registration document</li>
              <li>Official letterhead or stamp</li>
            </ul>
          </div>
        </div>
      </div>

      {/* File Upload */}
      <div>
        <label className="block text-sm font-semibold mb-2">
          Upload Verification Documents (PDF only)
        </label>
        <div className="border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary transition-colors">
          <input
            type="file"
            multiple
            accept=".pdf"
            onChange={handleFileUpload}
            className="hidden"
            id="file-upload"
          />
          <label htmlFor="file-upload" className="cursor-pointer">
            <Upload className="h-12 w-12 mx-auto text-muted-foreground mb-4" />
            <p className="text-sm font-medium mb-1">
              Click to upload or drag and drop
            </p>
            <p className="text-xs text-muted-foreground">
              PDF files only, up to 10MB each
            </p>
          </label>
        </div>
      </div>

      {/* Uploaded Documents */}
      {uploadedDocs.length > 0 && (
        <div className="space-y-3">
          <label className="block text-sm font-semibold">
            Uploaded Documents ({uploadedDocs.length})
          </label>
          {uploadedDocs.map((file, index) => (
            <div
              key={index}
              className="flex items-center justify-between p-3 bg-accent rounded-lg"
            >
              <div className="flex items-center space-x-3 flex-1 min-w-0">
                <FileText className="h-5 w-5 text-primary flex-shrink-0" />
                <div className="flex-1 min-w-0">
                  <p className="text-sm font-medium truncate">{file.name}</p>
                  <p className="text-xs text-muted-foreground font-mono truncate">
                    Hash: {docHashes[index]}
                  </p>
                </div>
              </div>
              <Button
                variant="ghost"
                size="sm"
                onClick={() => removeDocument(index)}
                className="flex-shrink-0"
              >
                Remove
              </Button>
            </div>
          ))}
        </div>
      )}

      {uploadedDocs.length === 0 && (
        <div className="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4">
          <div className="flex items-start space-x-3">
            <AlertCircle className="h-5 w-5 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5" />
            <p className="text-sm text-yellow-700 dark:text-yellow-300">
              At least one verification document is recommended for faster approval
            </p>
          </div>
        </div>
      )}
    </div>
  );

  // Step 3: Contact Information
  const renderStep3 = () => (
    <div className="space-y-6">
      <div>
        <label className="block text-sm font-semibold mb-2">
          Primary Contact Name *
        </label>
        <Input
          {...register('contactName')}
          placeholder="Full name of primary contact"
          className={errors.contactName ? 'border-red-500' : ''}
        />
        {errors.contactName && (
          <p className="text-sm text-red-600 mt-1">{errors.contactName.message}</p>
        )}
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label className="block text-sm font-semibold mb-2">
            <Mail className="inline h-4 w-4 mr-1" />
            Email Address *
          </label>
          <Input
            {...register('contactEmail')}
            type="email"
            placeholder="contact@institution.edu"
            className={errors.contactEmail ? 'border-red-500' : ''}
          />
          {errors.contactEmail && (
            <p className="text-sm text-red-600 mt-1">{errors.contactEmail.message}</p>
          )}
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2">
            <Phone className="inline h-4 w-4 mr-1" />
            Phone Number *
          </label>
          <Input
            {...register('contactPhone')}
            type="tel"
            placeholder="+1 (555) 123-4567"
            className={errors.contactPhone ? 'border-red-500' : ''}
          />
          {errors.contactPhone && (
            <p className="text-sm text-red-600 mt-1">{errors.contactPhone.message}</p>
          )}
        </div>
      </div>

      <div>
        <label className="block text-sm font-semibold mb-2">
          <MapPin className="inline h-4 w-4 mr-1" />
          Official Address *
        </label>
        <textarea
          {...register('address')}
          placeholder="Complete institutional address including street, city, state/province, postal code"
          className="flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm"
        />
        {errors.address && (
          <p className="text-sm text-red-600 mt-1">{errors.address.message}</p>
        )}
      </div>
    </div>
  );

  // Step 4: Review & Submit
  const renderStep4 = () => {
    const formData = watch();
    
    return (
      <div className="space-y-6">
        <div className="bg-accent rounded-lg p-6 space-y-4">
          <h3 className="font-semibold text-lg mb-4">Review Your Information</h3>
          
          {/* Institution Info */}
          <div className="space-y-2">
            <p className="text-sm font-semibold text-muted-foreground">Institution Details</p>
            <div className="bg-background rounded p-3 space-y-1">
              <p className="font-medium">{formData.name}</p>
              <p className="text-sm text-muted-foreground">{formData.type}</p>
              {formData.description && (
                <p className="text-sm mt-2">{formData.description}</p>
              )}
              <div className="flex items-center space-x-4 mt-2 text-sm">
                <span className="flex items-center">
                  <MapPin className="h-3 w-3 mr-1" />
                  {formData.country}
                </span>
                <span className="flex items-center">
                  <Globe className="h-3 w-3 mr-1" />
                  {formData.website}
                </span>
              </div>
            </div>
          </div>

          {/* Documents */}
          <div className="space-y-2">
            <p className="text-sm font-semibold text-muted-foreground">Verification Documents</p>
            <div className="bg-background rounded p-3">
              <p className="text-sm">{uploadedDocs.length} document(s) uploaded</p>
              {docHashes.length > 0 && (
                <p className="text-xs text-muted-foreground mt-1">
                  Document hashes will be stored on-chain
                </p>
              )}
            </div>
          </div>

          {/* Contact */}
          <div className="space-y-2">
            <p className="text-sm font-semibold text-muted-foreground">Contact Information</p>
            <div className="bg-background rounded p-3 space-y-1 text-sm">
              <p className="font-medium">{formData.contactName}</p>
              <p className="flex items-center text-muted-foreground">
                <Mail className="h-3 w-3 mr-2" />
                {formData.contactEmail}
              </p>
              <p className="flex items-center text-muted-foreground">
                <Phone className="h-3 w-3 mr-2" />
                {formData.contactPhone}
              </p>
              <p className="flex items-center text-muted-foreground mt-2">
                <MapPin className="h-3 w-3 mr-2" />
                {formData.address}
              </p>
            </div>
          </div>
        </div>

        {/* Terms */}
        <label className="flex items-start space-x-3 cursor-pointer">
          <input
            type="checkbox"
            {...register('termsAccepted')}
            className="mt-1"
          />
          <span className="text-sm">
            I certify that all information provided is accurate and that I have the authority 
            to represent this institution. I agree to the{' '}
            <a href="#" className="text-primary hover:underline">Terms of Service</a>
            {' '}and{' '}
            <a href="#" className="text-primary hover:underline">Privacy Policy</a>.
          </span>
        </label>
        {errors.termsAccepted && (
          <p className="text-sm text-red-600">{errors.termsAccepted.message}</p>
        )}

        <div className="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4">
          <div className="flex items-start space-x-3">
            <CheckCircle2 className="h-5 w-5 text-green-600 dark:text-green-500 flex-shrink-0 mt-0.5" />
            <div className="text-sm">
              <p className="font-semibold text-green-800 dark:text-green-400">Next Steps</p>
              <p className="text-green-700 dark:text-green-300 mt-1">
                After submission, your application will be reviewed. This typically takes 3-5 business days. 
                You'll receive an email notification when your institution is verified.
              </p>
            </div>
          </div>
        </div>
      </div>
    );
  };

  return (
    <Card className="max-w-3xl mx-auto">
      <CardHeader>
        <CardTitle className="flex items-center space-x-2">
          <Building2 className="h-6 w-6" />
          <span>Register as Institution</span>
        </CardTitle>
        <CardDescription>
          Complete the registration process to start issuing credentials
        </CardDescription>
        
        {/* Progress Indicator */}
        <div className="flex items-center space-x-2 mt-4">
          {[1, 2, 3, 4].map((s) => (
            <div key={s} className="flex items-center flex-1">
              <div
                className={`h-2 flex-1 rounded-full transition-colors ${
                  s <= step ? 'bg-primary' : 'bg-muted'
                }`}
              />
              {s < 4 && <div className="w-2" />}
            </div>
          ))}
        </div>
        <div className="flex justify-between text-xs text-muted-foreground mt-2">
          <span>Info</span>
          <span>Documents</span>
          <span>Contact</span>
          <span>Review</span>
        </div>
      </CardHeader>

      <CardContent>
        <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">
          {/* Step Content */}
          {step === 1 && renderStep1()}
          {step === 2 && renderStep2()}
          {step === 3 && renderStep3()}
          {step === 4 && renderStep4()}

          {/* Navigation Buttons */}
          <div className="flex justify-between pt-6 border-t">
            <div>
              {step > 1 && (
                <Button
                  type="button"
                  variant="outline"
                  onClick={prevStep}
                >
                  <ArrowLeft className="h-4 w-4 mr-2" />
                  Previous
                </Button>
              )}
              {onCancel && step === 1 && (
                <Button
                  type="button"
                  variant="outline"
                  onClick={onCancel}
                >
                  Cancel
                </Button>
              )}
            </div>

            <div>
              {step < 4 ? (
                <Button
                  type="button"
                  onClick={nextStep}
                >
                  Next
                  <ArrowRight className="h-4 w-4 ml-2" />
                </Button>
              ) : (
                <Button
                  type="submit"
                  disabled={isSubmitting}
                >
                  {isSubmitting ? (
                    <>
                      <Loader2 className="h-4 w-4 mr-2 animate-spin" />
                      Submitting...
                    </>
                  ) : (
                    <>
                      <CheckCircle2 className="h-4 w-4 mr-2" />
                      Submit Registration
                    </>
                  )}
                </Button>
              )}
            </div>
          </div>
        </form>
      </CardContent>
    </Card>
  );
}
</file>

<file path="src/components/error/ErrorBoundary.tsx">
import { Component, ErrorInfo, ReactNode } from 'react';
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/components/ui/Card';
import { Button } from '@/components/ui/Button';
import { AlertTriangle, RefreshCw } from 'lucide-react';

interface Props {
  children?: ReactNode;
}

interface State {
  hasError: boolean;
  error?: Error;
  errorInfo?: ErrorInfo;
}

export class ErrorBoundary extends Component<Props, State> {
  public state: State = {
    hasError: false
  };

  public static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('Uncaught error:', error, errorInfo);
    this.setState({ error, errorInfo });
  }

  private handleReset = () => {
    this.setState({ hasError: false, error: undefined, errorInfo: undefined });
    window.location.href = '/';
  };

  public render() {
    if (this.state.hasError) {
      return (
        <div className="min-h-screen flex items-center justify-center bg-background p-4">
          <Card className="max-w-2xl w-full">
            <CardHeader>
              <div className="flex items-center space-x-2 text-destructive mb-2">
                <AlertTriangle className="h-6 w-6" />
                <CardTitle>Application Error</CardTitle>
              </div>
              <CardDescription>
                Something went wrong. Please try refreshing the page.
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              {this.state.error && (
                <div className="bg-destructive/10 border border-destructive/20 rounded-lg p-4">
                  <p className="font-semibold text-sm mb-2">Error Message:</p>
                  <pre className="text-xs overflow-x-auto bg-background p-2 rounded">
                    {this.state.error.message}
                  </pre>
                </div>
              )}
              
              {this.state.errorInfo && (
                <details className="text-sm">
                  <summary className="cursor-pointer font-semibold mb-2 text-muted-foreground hover:text-foreground">
                    Stack Trace (click to expand)
                  </summary>
                  <pre className="text-xs overflow-x-auto bg-muted p-4 rounded mt-2">
                    {this.state.errorInfo.componentStack}
                  </pre>
                </details>
              )}
              
              <div className="flex space-x-3">
                <Button onClick={this.handleReset} className="flex-1">
                  <RefreshCw className="h-4 w-4 mr-2" />
                  Reset Application
                </Button>
                <Button 
                  variant="outline" 
                  onClick={() => window.location.reload()}
                  className="flex-1"
                >
                  Reload Page
                </Button>
              </div>
            </CardContent>
          </Card>
        </div>
      );
    }

    return this.props.children;
  }
}

export default ErrorBoundary;
</file>

<file path="src/components/layout/Footer.tsx">
import { Link } from 'react-router-dom';
import { Github, Twitter, Book } from 'lucide-react';

export default function Footer() {
  return (
    <footer className="border-t border-border bg-background">
      <div className="container mx-auto px-4 py-6">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 className="font-semibold text-sm mb-3">About</h3>
            <p className="text-sm text-muted-foreground">
              Decentralized academic credential verification built on Polkadot.
            </p>
          </div>

          <div>
            <h3 className="font-semibold text-sm mb-3">Quick Links</h3>
            <ul className="space-y-2 text-sm">
              <li>
                <Link to="/dashboard" className="text-muted-foreground hover:text-foreground transition-colors">
                  Dashboard
                </Link>
              </li>
              <li>
                <Link to="/verify" className="text-muted-foreground hover:text-foreground transition-colors">
                  Verify Credential
                </Link>
              </li>
              <li>
                <Link to="/institutions" className="text-muted-foreground hover:text-foreground transition-colors">
                  Institutions
                </Link>
              </li>
            </ul>
          </div>

          <div>
            <h3 className="font-semibold text-sm mb-3">Resources</h3>
            <ul className="space-y-2 text-sm">
              <li>
                <a 
                  href="https://docs.example.com" 
                  target="_blank" 
                  rel="noopener noreferrer"
                  className="text-muted-foreground hover:text-foreground transition-colors inline-flex items-center"
                >
                  <Book className="h-4 w-4 mr-1" />
                  Documentation
                </a>
              </li>
              <li>
                <a href="#" className="text-muted-foreground hover:text-foreground transition-colors">
                  Privacy Policy
                </a>
              </li>
              <li>
                <a href="#" className="text-muted-foreground hover:text-foreground transition-colors">
                  Terms of Service
                </a>
              </li>
            </ul>
          </div>

          <div>
            <h3 className="font-semibold text-sm mb-3">Community</h3>
            <div className="flex space-x-4">
              <a 
                href="https://github.com" 
                target="_blank" 
                rel="noopener noreferrer"
                className="text-muted-foreground hover:text-foreground transition-colors"
              >
                <Github className="h-5 w-5" />
              </a>
              <a 
                href="https://twitter.com" 
                target="_blank" 
                rel="noopener noreferrer"
                className="text-muted-foreground hover:text-foreground transition-colors"
              >
                <Twitter className="h-5 w-5" />
              </a>
            </div>
          </div>
        </div>

        <div className="mt-8 pt-6 border-t border-border flex flex-col sm:flex-row justify-between items-center text-sm text-muted-foreground">
          <p> 2024 Academic Verify. All rights reserved.</p>
          <div className="flex items-center space-x-4 mt-4 sm:mt-0">
            <span>v1.0.0</span>
            <span></span>
            <span className="flex items-center">
              <span className="h-2 w-2 rounded-full bg-green-500 mr-2"></span>
              All systems operational
            </span>
          </div>
        </div>
      </div>
    </footer>
  );
}
</file>

<file path="src/components/layout/Header.tsx">
import { Link } from 'react-router-dom';
import { Menu, X } from 'lucide-react';
import { useState } from 'react';
import WalletConnect from '../blockchain/WalletConnect';
import ChainStatus from '../blockchain/ChainStatus';
import { Button } from '../ui/Button';

export default function Header() {
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  return (
    <header className="sticky top-0 z-50 w-full border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
      <div className="container mx-auto px-4">
        <div className="flex h-16 items-center justify-between">
          {/* Logo */}
          <Link to="/" className="flex items-center space-x-2">
            <div className="h-8 w-8 rounded-lg bg-primary flex items-center justify-center">
              <span className="text-primary-foreground font-bold text-lg">AV</span>
            </div>
            <span className="font-bold text-lg hidden sm:inline-block">
              Academic Verify
            </span>
          </Link>

          {/* Desktop Navigation */}
          <nav className="hidden md:flex items-center space-x-6">
            <Link 
              to="/dashboard" 
              className="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors"
            >
              Dashboard
            </Link>
            <Link 
              to="/credentials" 
              className="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors"
            >
              Credentials
            </Link>
            <Link 
              to="/institutions" 
              className="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors"
            >
              Institutions
            </Link>
            <Link 
              to="/verify" 
              className="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors"
            >
              Verify
            </Link>
          </nav>

          {/* Right side actions */}
          <div className="flex items-center space-x-4">
            {/* Chain Status */}
            <div className="hidden sm:block">
              <ChainStatus />
            </div>

            {/* Wallet Connect */}
            <WalletConnect />

            {/* Mobile menu button */}
            <Button
              variant="ghost"
              size="icon"
              className="md:hidden"
              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
            >
              {mobileMenuOpen ? (
                <X className="h-5 w-5" />
              ) : (
                <Menu className="h-5 w-5" />
              )}
            </Button>
          </div>
        </div>

        {/* Mobile Navigation */}
        {mobileMenuOpen && (
          <div className="md:hidden py-4 border-t border-border">
            <nav className="flex flex-col space-y-3">
              <Link 
                to="/dashboard" 
                className="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors py-2"
                onClick={() => setMobileMenuOpen(false)}
              >
                Dashboard
              </Link>
              <Link 
                to="/credentials" 
                className="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors py-2"
                onClick={() => setMobileMenuOpen(false)}
              >
                Credentials
              </Link>
              <Link 
                to="/institutions" 
                className="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors py-2"
                onClick={() => setMobileMenuOpen(false)}
              >
                Institutions
              </Link>
              <Link 
                to="/verify" 
                className="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors py-2"
                onClick={() => setMobileMenuOpen(false)}
              >
                Verify
              </Link>
              <div className="pt-2">
                <ChainStatus />
              </div>
            </nav>
          </div>
        )}
      </div>
    </header>
  );
}
</file>

<file path="src/components/layout/index.ts">
export { default as MainLayout } from './MainLayout';
export { default as Header } from './Header';
export { default as Sidebar } from './Sidebar';
export { default as Footer } from './Footer';
</file>

<file path="src/components/layout/MainLayout.tsx">
import { ReactNode } from 'react';
import Header from './Header';
import Footer from './Footer';
import Sidebar from './Sidebar';

interface MainLayoutProps {
  children: ReactNode;
}

export default function MainLayout({ children }: MainLayoutProps) {
  return (
    <div className="min-h-screen flex flex-col bg-background">
      <Header />
      
      <div className="flex flex-1">
        <aside className="hidden lg:block w-64 border-r border-border">
          <Sidebar />
        </aside>
        
        <main className="flex-1 overflow-x-hidden">
          <div className="container mx-auto px-4 py-6 md:px-6 lg:px-8">
            {children}
          </div>
        </main>
      </div>
      
      <Footer />
    </div>
  );
}
</file>

<file path="src/components/layout/Sidebar.tsx">
import { useState } from 'react';
import { Link, useLocation } from 'react-router-dom';
import { 
  LayoutDashboard, 
  Award, 
  Building2, 
  CheckCircle, 
  Users,
  FileText,
  Settings,
  Plus
} from 'lucide-react';
import { cn } from '@/lib/utils/cn';
import { Button } from '../ui/Button';
import DIDStatus from '../did/DIDStatus';
import CreateDIDModal from '../did/CreateDIDModal';
import { useDIDStore } from '@/store/did.store';

const navigationItems = [
  {
    title: 'Dashboard',
    href: '/dashboard',
    icon: LayoutDashboard,
  },
  {
    title: 'My Credentials',
    href: '/credentials',
    icon: Award,
  },
  {
    title: 'Institutions',
    href: '/institutions',
    icon: Building2,
  },
  {
    title: 'Verify',
    href: '/verify',
    icon: CheckCircle,
  },
];

const institutionItems = [
  {
    title: 'Institution Profile',
    href: '/institution',
    icon: Building2,
  },
  {
    title: 'Issued Credentials',
    href: '/institution/issued',
    icon: FileText,
  },
  {
    title: 'Endorsements',
    href: '/institution/endorsements',
    icon: Users,
  },
];

export default function Sidebar() {
  const location = useLocation();
  const [showCreateDIDModal, setShowCreateDIDModal] = useState(false);
  const { hasDID, isInstitution } = useDIDStore();

  return (
    <>
      <div className="flex flex-col h-full py-6 px-3">
        {/* User Profile Section */}
        <div className="mb-6 px-3">
          <DIDStatus />
        </div>

        {/* Quick Actions */}
        {!hasDID && (
          <div className="mb-6 px-3 space-y-2">
            <Button 
              className="w-full justify-start" 
              size="sm"
              onClick={() => setShowCreateDIDModal(true)}
            >
              <Plus className="h-4 w-4 mr-2" />
              Create DID
            </Button>
          </div>
        )}

        {/* Main Navigation */}
        <nav className="flex-1 space-y-1">
          <div className="px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2">
            Main Menu
          </div>
          {navigationItems.map((item) => {
            const Icon = item.icon;
            const isActive = location.pathname === item.href;
            
            return (
              <Link
                key={item.href}
                to={item.href}
                className={cn(
                  "flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors",
                  isActive
                    ? "bg-primary text-primary-foreground"
                    : "text-muted-foreground hover:bg-accent hover:text-accent-foreground"
                )}
              >
                <Icon className="h-5 w-5 mr-3" />
                {item.title}
              </Link>
            );
          })}

          {/* Institution Section (conditional) */}
          {isInstitution && (
            <>
              <div className="px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mt-6 mb-2">
                Institution
              </div>
              {institutionItems.map((item) => {
                const Icon = item.icon;
                const isActive = location.pathname === item.href;
                
                return (
                  <Link
                    key={item.href}
                    to={item.href}
                    className={cn(
                      "flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors",
                      isActive
                        ? "bg-primary text-primary-foreground"
                        : "text-muted-foreground hover:bg-accent hover:text-accent-foreground"
                    )}
                  >
                    <Icon className="h-5 w-5 mr-3" />
                    {item.title}
                  </Link>
                );
              })}
            </>
          )}
        </nav>

        {/* Settings */}
        <div className="mt-auto pt-4 border-t border-border">
          <Link
            to="/settings"
            className="flex items-center px-3 py-2 text-sm font-medium rounded-lg text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
          >
            <Settings className="h-5 w-5 mr-3" />
            Settings
          </Link>
        </div>
      </div>

      {/* Create DID Modal */}
      <CreateDIDModal 
        isOpen={showCreateDIDModal}
        onClose={() => setShowCreateDIDModal(false)}
      />
    </>
  );
}
</file>

<file path="src/components/ui/Badge.tsx">
import * as React from 'react';
import { cn } from '@/lib/utils/cn';

export interface BadgeProps extends React.HTMLAttributes<HTMLDivElement> {
  variant?: 'default' | 'success' | 'warning' | 'error' | 'outline' | 'secondary';
}

export const Badge = React.forwardRef<HTMLDivElement, BadgeProps>(
  ({ className, variant = 'default', ...props }, ref) => {
    return (
      <div
        ref={ref}
        className={cn(
          'inline-flex items-center rounded-md px-2 py-1 text-xs font-semibold',
          variant === 'default' && 'bg-gray-100 text-gray-900',
          variant === 'success' && 'bg-green-100 text-green-900',
          variant === 'warning' && 'bg-yellow-100 text-yellow-900',
          variant === 'error' && 'bg-red-100 text-red-900',
          variant === 'outline' && 'border border-gray-400 text-gray-800',
          variant === 'secondary' && 'bg-gray-200 text-gray-700',
          className
        )}
        {...props}
      />
    );
  }
);

Badge.displayName = 'Badge';
</file>

<file path="src/components/ui/Button.tsx">
import { ButtonHTMLAttributes, forwardRef } from 'react';
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '@/lib/utils/cn';


const buttonVariants = cva(
  "inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline: "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8",
        icon: "h-10 w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
);

export interface ButtonProps
  extends ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {}

const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, ...props }, ref) => {
    return (
      <button
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    );
  }
);
Button.displayName = "Button";

export { Button, buttonVariants };
</file>

<file path="src/components/ui/Card.tsx">
// Card.tsx
import { HTMLAttributes, forwardRef } from 'react';
import { cn } from '@/lib/utils/cn';

const Card = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      className={cn(
        "rounded-lg border border-border bg-card text-card-foreground shadow-sm",
        className
      )}
      {...props}
    />
  )
);
Card.displayName = "Card";

const CardHeader = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      className={cn("flex flex-col space-y-1.5 p-6", className)}
      {...props}
    />
  )
);
CardHeader.displayName = "CardHeader";

const CardTitle = forwardRef<HTMLParagraphElement, HTMLAttributes<HTMLHeadingElement>>(
  ({ className, ...props }, ref) => (
    <h3
      ref={ref}
      className={cn("text-2xl font-semibold leading-none tracking-tight", className)}
      {...props}
    />
  )
);
CardTitle.displayName = "CardTitle";

const CardDescription = forwardRef<HTMLParagraphElement, HTMLAttributes<HTMLParagraphElement>>(
  ({ className, ...props }, ref) => (
    <p
      ref={ref}
      className={cn("text-sm text-muted-foreground", className)}
      {...props}
    />
  )
);
CardDescription.displayName = "CardDescription";

const CardContent = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
  )
);
CardContent.displayName = "CardContent";

const CardFooter = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      className={cn("flex items-center p-6 pt-0", className)}
      {...props}
    />
  )
);
CardFooter.displayName = "CardFooter";

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };
</file>

<file path="src/components/ui/index.ts">
export * from './Button';
export * from './Card';
export * from './Badge';
export * from './Spinner';
export * from './Input';
export * from './Modal';
</file>

<file path="src/components/ui/Input.tsx">
import { InputHTMLAttributes, forwardRef } from 'react';
import { cn } from '@/lib/utils/cn';

export interface InputProps extends InputHTMLAttributes<HTMLInputElement> {}

const Input = forwardRef<HTMLInputElement, InputProps>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        ref={ref}
        {...props}
      />
    );
  }
);
Input.displayName = "Input";

export { Input };
</file>

<file path="src/components/ui/Modal.tsx">
import { ReactNode, useEffect } from 'react';
import { X } from 'lucide-react';
import { cn } from '@/lib/utils/cn';
import { Button } from './Button';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  children: ReactNode;
  title?: string;
  description?: string;
  className?: string;
}

export function Modal({ isOpen, onClose, children, title, description, className }: ModalProps) {
  useEffect(() => {
    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === 'Escape') {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
      document.body.style.overflow = 'hidden';
    }

    return () => {
      document.removeEventListener('keydown', handleEscape);
      document.body.style.overflow = 'unset';
    };
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center">
      {/* Backdrop */}
      <div 
        className="absolute inset-0 bg-background/80 backdrop-blur-sm"
        onClick={onClose}
      />
      
      {/* Modal */}
      <div 
        className={cn(
          "relative bg-card border border-border rounded-lg shadow-lg max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",
          className
        )}
      >
        {/* Header */}
        {(title || description) && (
          <div className="px-6 py-4 border-b border-border">
            <div className="flex items-start justify-between">
              <div>
                {title && (
                  <h2 className="text-lg font-semibold">{title}</h2>
                )}
                {description && (
                  <p className="text-sm text-muted-foreground mt-1">{description}</p>
                )}
              </div>
              <Button
                variant="ghost"
                size="icon"
                onClick={onClose}
                className="h-6 w-6 rounded-full"
              >
                <X className="h-4 w-4" />
              </Button>
            </div>
          </div>
        )}
        
        {/* Content */}
        <div className="px-6 py-4">
          {children}
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/components/ui/Spinner.tsx">
import { cn } from '@/lib/utils/cn';

interface SpinnerProps {
  className?: string;
  size?: 'sm' | 'md' | 'lg';
}

const sizeClasses = {
  sm: 'h-4 w-4 border-2',
  md: 'h-8 w-8 border-3',
  lg: 'h-12 w-12 border-4',
};

export function Spinner({ className, size = 'md' }: SpinnerProps) {
  return (
    <div
      className={cn(
        'animate-spin rounded-full border-solid border-primary border-t-transparent',
        sizeClasses[size],
        className
      )}
    />
  );
}
</file>

<file path="src/hooks/blockchain/usePolkadotApi.ts">
import { useState, useEffect } from 'react';
import { usePolkadotContext } from '@/providers/PolkadotProvider';
import { CHAIN_CONFIG } from '@/lib/utils/constants';

export function usePolkadotApi() {
  const { api, isReady, error } = usePolkadotContext();
  const [blockNumber, setBlockNumber] = useState<number>(0);
  const [chainName, setChainName] = useState<string>(CHAIN_CONFIG.CHAIN_NAME);
  const [isConnected, setIsConnected] = useState<boolean>(false);

  useEffect(() => {
    if (!api || !isReady) {
      setIsConnected(false);
      return;
    }

    setIsConnected(true);

    // Get chain name
    api.rpc.system.chain().then((chain) => {
      setChainName(chain.toString());
    });

    // Subscribe to new blocks
    let unsubscribe: (() => void) | undefined;

    api.rpc.chain.subscribeNewHeads((header) => {
      setBlockNumber(header.number.toNumber());
    }).then((unsub) => {
      unsubscribe = unsub;
    });

    return () => {
      if (unsubscribe) {
        unsubscribe();
      }
    };
  }, [api, isReady]);

  return {
    api,
    isReady,
    isConnected,
    blockNumber,
    chainName,
    error,
  };
}
</file>

<file path="src/lib/utils/cn.ts">
// cn.ts - Class name utility
import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
</file>

<file path="src/lib/utils/constants.ts">
// constants.ts - Application constants
export const APP_NAME = 'Academic Verify';
export const APP_VERSION = '1.0.0';

// Blockchain constants
export const CHAIN_CONFIG = {
  WS_PROVIDER: 'ws://127.0.0.1:9944', // Local node
  // WS_PROVIDER: 'wss://your-parachain.example.com', // Production
  CHAIN_NAME: 'Academic Verification Chain',
  DECIMALS: 12,
  TOKEN_SYMBOL: 'AVC',
};

// Transaction status
export const TX_STATUS = {
  IDLE: 'idle',
  SIGNING: 'signing',
  SUBMITTING: 'submitting',
  IN_BLOCK: 'inBlock',
  FINALIZED: 'finalized',
  ERROR: 'error',
} as const;

// DID status
export const DID_STATUS = {
  NONE: 'none',
  ACTIVE: 'active',
  INACTIVE: 'inactive',
  PENDING: 'pending',
} as const;

// Credential status
export const CREDENTIAL_STATUS = {
  ACTIVE: 'active',
  REVOKED: 'revoked',
  EXPIRED: 'expired',
} as const;

// Credential types
export const CREDENTIAL_TYPES = [
  'Bachelor\'s Degree',
  'Master\'s Degree',
  'Doctorate (PhD)',
  'Certificate',
  'Transcript',
  'Professional Certification',
  'Other',
] as const;

// Institution types
export const INSTITUTION_TYPES = [
  'University',
  'College',
  'Training Center',
  'Vocational School',
  'Online Academy',
  'Other',
] as const;

// Endorsement types
export const ENDORSEMENT_TYPES = [
  'Professional',
  'Academic',
  'Research',
  'Teaching',
  'Innovation',
] as const;

// Reputation score thresholds
export const REPUTATION_THRESHOLDS = {
  NEW: 0,
  ESTABLISHED: 201,
  REPUTABLE: 501,
  EXCELLENT: 751,
} as const;

// Local storage keys
export const STORAGE_KEYS = {
  CREDENTIALS: 'av_credentials',
  PREFERENCES: 'av_preferences',
  CACHED_DIDS: 'av_cached_dids',
  THEME: 'av_theme',
} as const;

// Pagination
export const PAGINATION = {
  DEFAULT_PAGE_SIZE: 10,
  MAX_PAGE_SIZE: 50,
} as const;

// File upload
export const FILE_UPLOAD = {
  MAX_SIZE: 10 * 1024 * 1024, // 10MB
  ACCEPTED_TYPES: ['application/pdf', 'image/png', 'image/jpeg'],
} as const;
</file>

<file path="src/pages/CreateDIDPage.tsx">
import { useNavigate } from 'react-router-dom';
import CreateDIDForm from '@/components/did/CreateDIDForm';

export default function CreateDIDPage() {
  const navigate = useNavigate();

  const handleSuccess = () => {
    // Navigate to dashboard after successful DID creation
    navigate('/dashboard');
  };

  return (
    <div className="max-w-4xl mx-auto py-8">
      <div className="mb-8 text-center">
        <h1 className="text-3xl font-bold mb-2">Welcome to Academic Verify</h1>
        <p className="text-muted-foreground">
          Let's create your decentralized identifier to get started
        </p>
      </div>
      
      <CreateDIDForm onSuccess={handleSuccess} />
    </div>
  );
}
</file>

<file path="src/pages/Credentials.tsx">
// src/pages/Credentials.tsx
import { useEffect, useState } from 'react';
import { useWalletStore } from '@/store/wallet.store';
import { useDIDStore } from '@/store/did.store';
import { useCredentialsStore } from '@/store/credentials.store';
import CredentialsList from '@/components/credentials/CredentialsList';
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/components/ui/Card';
import { Button } from '@/components/ui/Button';
import { AlertCircle, Award, RefreshCw } from 'lucide-react';
import { useNavigate } from 'react-router-dom';
import type { Credential } from '@/components/credentials/CredentialCard';

export default function Credentials() {
  const navigate = useNavigate();
  const { isConnected, account } = useWalletStore();
  const { hasDID, didAddress } = useDIDStore();
  const { credentials, loading, setLoading } = useCredentialsStore();
  const [refreshing, setRefreshing] = useState(false);

  // Fetch credentials when component mounts
  useEffect(() => {
    if (isConnected && hasDID && didAddress) {
      fetchCredentials();
    }
  }, [isConnected, hasDID, didAddress]);

  const fetchCredentials = async () => {
    setLoading(true);
    try {
      // TODO: Replace with actual blockchain query
      // For now, use mock data
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      // Mock credentials
      const mockCredentials: Credential[] = [
        {
          id: 'cred_1',
          holder: didAddress || '',
          issuer: '5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY',
          issuerName: 'Massachusetts Institute of Technology',
          credentialHash: '0x' + Array(64).fill(0).map(() => Math.floor(Math.random() * 16).toString(16)).join(''),
          credentialType: "Bachelor's Degree",
          degreeName: 'Bachelor of Science in Computer Science',
          fieldOfStudy: 'Computer Science',
          issuedAt: Date.now() - 365 * 24 * 60 * 60 * 1000, // 1 year ago
          revoked: false,
          metadata: 'Graduated with honors. GPA: 3.85',
        },
        {
          id: 'cred_2',
          holder: didAddress || '',
          issuer: '5FHneW46xGXgs5mUiveU4sbTyGBzmstUspZC92UhjJM694ty',
          issuerName: 'Stanford University',
          credentialHash: '0x' + Array(64).fill(0).map(() => Math.floor(Math.random() * 16).toString(16)).join(''),
          credentialType: "Master's Degree",
          degreeName: 'Master of Science in Artificial Intelligence',
          fieldOfStudy: 'Artificial Intelligence',
          issuedAt: Date.now() - 90 * 24 * 60 * 60 * 1000, // 90 days ago
          revoked: false,
          metadata: 'Thesis: "Deep Learning for Medical Imaging"',
        },
        {
          id: 'cred_3',
          holder: didAddress || '',
          issuer: '5FLSigC9HGRKVhB9FiEo4Y3koPsNmBmLJbpXg2mp1hXcS59Y',
          issuerName: 'Harvard University',
          credentialHash: '0x' + Array(64).fill(0).map(() => Math.floor(Math.random() * 16).toString(16)).join(''),
          credentialType: 'Certificate',
          degreeName: 'Data Science Professional Certificate',
          fieldOfStudy: 'Data Science',
          issuedAt: Date.now() - 180 * 24 * 60 * 60 * 1000, // 180 days ago
          expiresAt: Date.now() + 365 * 24 * 60 * 60 * 1000, // Expires in 1 year
          revoked: false,
        },
      ];

      useCredentialsStore.setState({ credentials: mockCredentials });
    } catch (error) {
      console.error('Failed to fetch credentials:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleRefresh = async () => {
    setRefreshing(true);
    await fetchCredentials();
    setRefreshing(false);
  };

  // Not connected
  if (!isConnected) {
    return (
      <div className="flex items-center justify-center min-h-[60vh]">
        <Card className="max-w-md">
          <CardHeader>
            <div className="flex items-center space-x-2 text-yellow-600 mb-2">
              <AlertCircle className="h-5 w-5" />
              <CardTitle>Connect Your Wallet</CardTitle>
            </div>
            <CardDescription>
              Please connect your wallet to view your credentials
            </CardDescription>
          </CardHeader>
        </Card>
      </div>
    );
  }

  // No DID
  if (!hasDID) {
    return (
      <div className="flex items-center justify-center min-h-[60vh]">
        <Card className="max-w-md">
          <CardHeader>
            <div className="flex items-center space-x-2 text-yellow-600 mb-2">
              <AlertCircle className="h-5 w-5" />
              <CardTitle>DID Required</CardTitle>
            </div>
            <CardDescription>
              You need to create a Decentralized Identifier to receive and manage credentials
            </CardDescription>
          </CardHeader>
          <CardContent>
            <Button onClick={() => navigate('/dashboard')} className="w-full">
              Create DID
            </Button>
          </CardContent>
        </Card>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold flex items-center">
            <Award className="h-8 w-8 mr-3 text-primary" />
            My Credentials
          </h1>
          <p className="text-muted-foreground mt-1">
            View and manage your academic credentials
          </p>
        </div>
        <Button
          onClick={handleRefresh}
          disabled={refreshing}
          variant="outline"
        >
          <RefreshCw className={`h-4 w-4 mr-2 ${refreshing ? 'animate-spin' : ''}`} />
          Refresh
        </Button>
      </div>

      {/* Info Banner */}
      <div className="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
        <div className="flex items-start space-x-3">
          <Award className="h-5 w-5 text-blue-600 dark:text-blue-500 flex-shrink-0 mt-0.5" />
          <div className="text-sm">
            <p className="font-semibold text-blue-800 dark:text-blue-400">
              Your Credential Wallet
            </p>
            <p className="text-blue-700 dark:text-blue-300 mt-1">
              All credentials issued to your DID appear here. You can view, verify, share, and export them at any time.
              These credentials are permanently stored on the blockchain and can be independently verified by anyone.
            </p>
          </div>
        </div>
      </div>

      {/* Credentials List */}
      <CredentialsList 
        credentials={credentials}
        loading={loading}
        emptyMessage="You haven't received any credentials yet"
      />
    </div>
  );
}
</file>

<file path="src/pages/Dashboard.tsx">
import { useWalletStore } from '@/store/wallet.store';
import { useDIDStore } from '@/store/did.store';
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/components/ui/Card';
import { Button } from '@/components/ui/Button';
import { Award, Building2, CheckCircle } from 'lucide-react';
import { Link } from 'react-router-dom';
import CreateDIDPage from './CreateDIDPage';

export default function Dashboard() {
  const { isConnected } = useWalletStore();
  const { hasDID, isInstitution } = useDIDStore();

  if (!isConnected) {
    return (
      <div className="flex items-center justify-center min-h-[60vh]">
        <Card className="max-w-md">
          <CardHeader>
            <CardTitle>Connect Your Wallet</CardTitle>
            <CardDescription>
              Please connect your wallet to access the dashboard
            </CardDescription>
          </CardHeader>
        </Card>
      </div>
    );
  }

  if (!hasDID) {
    return <CreateDIDPage />;
  }

  return (
    <div className="space-y-6">
      <div>
        <h1 className="text-3xl font-bold mb-2">
          Welcome back!
        </h1>
        <p className="text-muted-foreground">
          {isInstitution ? 'Manage your institution and issue credentials' : 'Manage your credentials and academic identity'}
        </p>
      </div>

      {/* Quick Stats */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Total Credentials
            </CardTitle>
            <Award className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">0</div>
            <p className="text-xs text-muted-foreground">
              Academic credentials
            </p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              {isInstitution ? 'Issued' : 'Verified'}
            </CardTitle>
            <CheckCircle className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">0</div>
            <p className="text-xs text-muted-foreground">
              {isInstitution ? 'Credentials issued' : 'Times verified'}
            </p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Reputation
            </CardTitle>
            <Building2 className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">0</div>
            <p className="text-xs text-muted-foreground">
              Reputation score
            </p>
          </CardContent>
        </Card>
      </div>

      {/* Quick Actions */}
      <Card>
        <CardHeader>
          <CardTitle>Quick Actions</CardTitle>
        </CardHeader>
        <CardContent className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <Link to="/credentials">
            <Button variant="outline" className="w-full justify-start">
              <Award className="h-4 w-4 mr-2" />
              View My Credentials
            </Button>
          </Link>
          <Link to="/verify">
            <Button variant="outline" className="w-full justify-start">
              <CheckCircle className="h-4 w-4 mr-2" />
              Verify a Credential
            </Button>
          </Link>
        </CardContent>
      </Card>
    </div>
  );
}
</file>

<file path="src/pages/Home.tsx">
// Home.tsx
import { Link } from 'react-router-dom';
import { Award, Shield, Users, Zap } from 'lucide-react';
import { Button } from '@/components/ui/Button';
import { Card, CardHeader, CardTitle, CardDescription } from '@/components/ui/Card';

export default function Home() {
  return (
    <div className="space-y-12">
      {/* Hero Section */}
      <section className="text-center py-12">
        <h1 className="text-4xl md:text-6xl font-bold mb-6">
          Decentralized Academic
          <span className="text-primary"> Verification</span>
        </h1>
        <p className="text-xl text-muted-foreground mb-8 max-w-2xl mx-auto">
          Secure, transparent, and verifiable academic credentials powered by blockchain technology.
          Take control of your educational achievements.
        </p>
        <div className="flex justify-center space-x-4">
          <Link to="/dashboard">
            <Button size="lg">
              Get Started
            </Button>
          </Link>
          <Link to="/verify">
            <Button size="lg" variant="outline">
              Verify Credential
            </Button>
          </Link>
        </div>
      </section>

      {/* Features Section */}
      <section>
        <h2 className="text-3xl font-bold text-center mb-8">
          Why Choose Academic Verify?
        </h2>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          <Card>
            <CardHeader>
              <Shield className="h-12 w-12 text-primary mb-4" />
              <CardTitle className="text-xl">Secure</CardTitle>
              <CardDescription>
                Cryptographically secured credentials stored on blockchain
              </CardDescription>
            </CardHeader>
          </Card>

          <Card>
            <CardHeader>
              <Zap className="h-12 w-12 text-primary mb-4" />
              <CardTitle className="text-xl">Instant Verification</CardTitle>
              <CardDescription>
                Verify credentials in seconds without intermediaries
              </CardDescription>
            </CardHeader>
          </Card>

          <Card>
            <CardHeader>
              <Users className="h-12 w-12 text-primary mb-4" />
              <CardTitle className="text-xl">Self-Sovereign</CardTitle>
              <CardDescription>
                You own and control your academic credentials
              </CardDescription>
            </CardHeader>
          </Card>

          <Card>
            <CardHeader>
              <Award className="h-12 w-12 text-primary mb-4" />
              <CardTitle className="text-xl">Reputation System</CardTitle>
              <CardDescription>
                Transparent institution rankings and endorsements
              </CardDescription>
            </CardHeader>
          </Card>
        </div>
      </section>

      {/* How It Works */}
      <section className="bg-accent/50 rounded-lg p-8">
        <h2 className="text-3xl font-bold text-center mb-8">
          How It Works
        </h2>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div className="text-center">
            <div className="h-12 w-12 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xl font-bold mx-auto mb-4">
              1
            </div>
            <h3 className="text-xl font-semibold mb-2">Create Your DID</h3>
            <p className="text-muted-foreground">
              Set up your decentralized identity to receive and manage credentials
            </p>
          </div>

          <div className="text-center">
            <div className="h-12 w-12 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xl font-bold mx-auto mb-4">
              2
            </div>
            <h3 className="text-xl font-semibold mb-2">Receive Credentials</h3>
            <p className="text-muted-foreground">
              Institutions issue verifiable credentials directly to your DID
            </p>
          </div>

          <div className="text-center">
            <div className="h-12 w-12 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xl font-bold mx-auto mb-4">
              3
            </div>
            <h3 className="text-xl font-semibold mb-2">Share & Verify</h3>
            <p className="text-muted-foreground">
              Share credentials with anyone who can instantly verify authenticity
            </p>
          </div>
        </div>
      </section>
    </div>
  );
}
</file>

<file path="src/pages/Institution.tsx">
// src/pages/Institution.tsx
import { useState } from 'react';
import { useDIDStore } from '@/store/did.store';
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/components/ui/Card';
import { Link } from 'react-router-dom';
import { Button } from '@/components/ui/Button';
import { Building2, FileText, Users, Award, Plus } from 'lucide-react';
import { Badge } from '@/components/ui/Badge';
import InstitutionRegistration from '@/components/did/InstitutionRegistration';

export default function Institution() {
  const { isInstitution, institutionName } = useDIDStore();
  const [showRegistration, setShowRegistration] = useState(!isInstitution);

  if (showRegistration && !isInstitution) {
    return (
      <div className="py-8">
        <InstitutionRegistration 
          onSuccess={() => setShowRegistration(false)}
          onCancel={() => setShowRegistration(false)}
        />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold">{institutionName || 'Institution Profile'}</h1>
          <p className="text-muted-foreground mt-1">
            Manage your institution and issue credentials
          </p>
        </div>
        <Badge variant="success" className="text-sm px-3 py-1">
          Verified Institution
        </Badge>
      </div>

      {/* Stats */}
      <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
        <Card>
          <CardHeader className="pb-3">
            <CardTitle className="text-sm font-medium text-muted-foreground">
              Credentials Issued
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">0</div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="pb-3">
            <CardTitle className="text-sm font-medium text-muted-foreground">
              Active Recipients
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">0</div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="pb-3">
            <CardTitle className="text-sm font-medium text-muted-foreground">
              Endorsements
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">0</div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="pb-3">
            <CardTitle className="text-sm font-medium text-muted-foreground">
              Reputation
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">0</div>
          </CardContent>
        </Card>
      </div>

      {/* Quick Actions */}
      <Card>
        <CardHeader>
          <CardTitle>Quick Actions</CardTitle>
        </CardHeader>
        <CardContent className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <Button variant="outline" className="justify-start h-auto py-4" asChild>
            <Link to="/institution/issue">
              <div className="flex flex-col items-start w-full">
                <div className="flex items-center space-x-2 mb-1">
                  <Plus className="h-4 w-4" />
                  <span className="font-semibold">Issue Credential</span>
                </div>
                <span className="text-xs text-muted-foreground">
                  Issue a new credential to a student
                </span>
              </div>
            </Link>
          </Button>

          <Button variant="outline" className="justify-start h-auto py-4">
            <div className="flex flex-col items-start w-full">
              <div className="flex items-center space-x-2 mb-1">
                <FileText className="h-4 w-4" />
                <span className="font-semibold">View Issued</span>
              </div>
              <span className="text-xs text-muted-foreground">
                See all credentials you've issued
              </span>
            </div>
          </Button>

          <Button variant="outline" className="justify-start h-auto py-4">
            <div className="flex flex-col items-start w-full">
              <div className="flex items-center space-x-2 mb-1">
                <Users className="h-4 w-4" />
                <span className="font-semibold">Manage Profile</span>
              </div>
              <span className="text-xs text-muted-foreground">
                Update institution information
              </span>
            </div>
          </Button>
        </CardContent>
      </Card>

      {/* Recent Activity */}
      <Card>
        <CardHeader>
          <CardTitle>Recent Activity</CardTitle>
          <CardDescription>Latest credential issuances and updates</CardDescription>
        </CardHeader>
        <CardContent>
          <div className="text-center py-8 text-muted-foreground">
            <Award className="h-12 w-12 mx-auto mb-3 opacity-50" />
            <p>No activity yet</p>
            <p className="text-sm mt-1">Start by issuing your first credential</p>
          </div>
        </CardContent>
      </Card>
    </div>
  );
}
</file>

<file path="src/pages/Institutions.tsx">
// src/pages/Institutions.tsx
import { Card, CardHeader, CardTitle, CardDescription } from '@/components/ui/Card';
import { Badge } from '@/components/ui/Badge';

export default function Institutions() {
  return (
    <div className="space-y-6">
      <h1 className="text-3xl font-bold">Institutions</h1>
      <Card>
        <CardHeader>
          <div className="flex items-center justify-between">
            <div>
              <CardTitle>Institution Directory</CardTitle>
              <CardDescription>
                Browse verified academic institutions
              </CardDescription>
            </div>
            <Badge variant="success">0 Verified</Badge>
          </div>
        </CardHeader>
      </Card>
    </div>
  );
}
</file>

<file path="src/pages/IssueCredential.tsx">
import { useNavigate } from 'react-router-dom';
import { useDIDStore } from '@/store/did.store';
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/components/ui/Card';
import { Button } from '@/components/ui/Button';
import { AlertCircle, ArrowLeft } from 'lucide-react';
import { lazy, Suspense, useEffect } from 'react';
import { Spinner } from '@/components/ui/Spinner';

// Lazy load the form component to prevent blocking the app
const IssueCredentialForm = lazy(() => import('@/components/credentials/IssueCredentialForm'));

export default function IssueCredential() {
  const navigate = useNavigate();
  const { isInstitution, hasDID } = useDIDStore();

  const handleSuccess = (credentialId: string) => {
    // Navigate to institution page after success
    navigate('/institution');
  };

  const handleCancel = () => {
    navigate('/institution');
  };

  // Check if user has DID
  if (!hasDID) {
    return (
      <div className="flex items-center justify-center min-h-[60vh]">
        <Card className="max-w-md">
          <CardHeader>
            <div className="flex items-center space-x-2 text-yellow-600 mb-2">
              <AlertCircle className="h-5 w-5" />
              <CardTitle>DID Required</CardTitle>
            </div>
            <CardDescription>
              You need to create a Decentralized Identifier (DID) before you can issue credentials.
            </CardDescription>
          </CardHeader>
          <CardContent>
            <Button onClick={() => navigate('/dashboard')} className="w-full">
              Create DID
            </Button>
          </CardContent>
        </Card>
      </div>
    );
  }

  // Check if user is an institution
  if (!isInstitution) {
    return (
      <div className="flex items-center justify-center min-h-[60vh]">
        <Card className="max-w-md">
          <CardHeader>
            <div className="flex items-center space-x-2 text-red-600 mb-2">
              <AlertCircle className="h-5 w-5" />
              <CardTitle>Institution Access Required</CardTitle>
            </div>
            <CardDescription>
              Only verified institutions can issue credentials. Please register as an institution first.
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-3">
            <Button onClick={() => navigate('/institution')} className="w-full">
              Register as Institution
            </Button>
            <Button onClick={() => navigate('/dashboard')} variant="outline" className="w-full">
              <ArrowLeft className="h-4 w-4 mr-2" />
              Back to Dashboard
            </Button>
          </CardContent>
        </Card>
      </div>
    );
  }

  return (
    <div className="py-8">
      <Suspense 
        fallback={
          <div className="flex items-center justify-center min-h-[60vh]">
            <div className="text-center">
              <Spinner size="lg" className="mx-auto mb-4" />
              <p className="text-muted-foreground">Loading form...</p>
            </div>
          </div>
        }
      >
        <IssueCredentialForm 
          onSuccess={handleSuccess}
          onCancel={handleCancel}
        />
      </Suspense>
    </div>
  );
}
</file>

<file path="src/pages/Verify.tsx">
// src/pages/Verify.tsx
import { useEffect, useState } from 'react';
import { useSearchParams } from 'react-router-dom';
import VerifyCredential from '@/components/credentials/VerifyCredential';
import { Shield } from 'lucide-react';

export default function Verify() {
  const [searchParams] = useSearchParams();
  const hashParam = searchParams.get('hash');

  return (
    <div className="max-w-4xl mx-auto space-y-6">
      {/* Page Header */}
      <div className="text-center">
        <div className="inline-flex items-center justify-center h-16 w-16 rounded-full bg-primary/10 mb-4">
          <Shield className="h-8 w-8 text-primary" />
        </div>
        <h1 className="text-3xl md:text-4xl font-bold mb-2">
          Verify Academic Credential
        </h1>
        <p className="text-muted-foreground max-w-2xl mx-auto">
          Instantly verify the authenticity of any academic credential issued on our blockchain.
          No account required.
        </p>
      </div>

      {/* Verification Component */}
      <VerifyCredential initialHash={hashParam || undefined} />

      {/* Trust Indicators */}
      <div className="mt-12 pt-8 border-t border-border">
        <p className="text-center text-sm text-muted-foreground mb-6">
          Trusted by institutions and employers worldwide
        </p>
        <div className="flex flex-wrap justify-center items-center gap-8 opacity-50">
          <div className="text-2xl font-bold">MIT</div>
          <div className="text-2xl font-bold">Stanford</div>
          <div className="text-2xl font-bold">Harvard</div>
          <div className="text-2xl font-bold">Oxford</div>
          <div className="text-2xl font-bold">Cambridge</div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/providers/PolkadotProvider.tsx">
import { createContext, useContext, useEffect, useState, ReactNode } from 'react';
import type { ApiPromise } from '@polkadot/api';
import { toast } from 'sonner';
import { CHAIN_CONFIG } from '@/lib/utils/constants';

interface PolkadotContextType {
  api: ApiPromise | null;
  isReady: boolean;
  error: string | null;
}

const PolkadotContext = createContext<PolkadotContextType>({
  api: null,
  isReady: false,
  error: null,
});

export const usePolkadotContext = () => useContext(PolkadotContext);

interface PolkadotProviderProps {
  children: ReactNode;
}

export function PolkadotProvider({ children }: PolkadotProviderProps) {
  const [api, setApi] = useState<ApiPromise | null>(null);
  const [isReady, setIsReady] = useState(false);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    let isMounted = true;
    let apiInstance: ApiPromise | null = null;

    async function initApi() {
      try {
        // Dynamic import to avoid build issues
        const { ApiPromise, WsProvider } = await import('@polkadot/api');
        
        console.log(' Connecting to blockchain...');
        console.log(' Endpoint:', CHAIN_CONFIG.WS_PROVIDER);
        
        const wsProvider = new WsProvider(CHAIN_CONFIG.WS_PROVIDER);
        
        // Connection timeout handler
        const timeout = setTimeout(() => {
          if (!isReady && isMounted) {
            console.warn(' Connection timeout - continuing without blockchain');
            setError('Could not connect to blockchain node (timeout)');
            toast.warning('Running in demo mode', {
              description: 'Connect to a node to enable blockchain features'
            });
          }
        }, 5000);

        // Create API instance
        apiInstance = await ApiPromise.create({ 
          provider: wsProvider,
          throwOnConnect: false,
        });

        clearTimeout(timeout);

        if (isMounted) {
          await apiInstance.isReady;
          setApi(apiInstance);
          setIsReady(true);
          console.log(' Connected to blockchain');
          toast.success('Connected to blockchain');
        }
      } catch (err) {
        console.error(' Blockchain connection error:', err);
        if (isMounted) {
          const errorMessage = err instanceof Error ? err.message : 'Failed to connect';
          setError(errorMessage);
          
          toast.info('Running in demo mode', {
            description: 'UI is functional, blockchain features disabled'
          });
        }
      }
    }

    // Delay initialization slightly to let UI render first
    const timer = setTimeout(() => {
      initApi();
    }, 1500);

    return () => {
      isMounted = false;
      clearTimeout(timer);
      if (apiInstance) {
        apiInstance.disconnect().catch(console.error);
      }
    };
  }, []);

  // Always render children, even if connection fails
  return (
    <PolkadotContext.Provider value={{ api, isReady, error }}>
      {children}
    </PolkadotContext.Provider>
  );
}
</file>

<file path="src/providers/WalletProvider.tsx">
import { createContext, useContext, ReactNode } from 'react';
import { useWalletStore } from '@/store/wallet.store';
import { toast } from 'sonner';

interface WalletContextType {
  enableWallet: () => Promise<void>;
}

const WalletContext = createContext<WalletContextType>({
  enableWallet: async () => {},
});

export const useWalletContext = () => useContext(WalletContext);

interface WalletProviderProps {
  children: ReactNode;
}

export function WalletProvider({ children }: WalletProviderProps) {
  const enableWallet = async () => {
    try {
      // Dynamic import to avoid build issues
      const { web3Accounts, web3Enable } = await import('@polkadot/extension-dapp');
      
      console.log(' Attempting to connect to wallet extension...');
      
      // Request access to extensions (supports Polkadot.js, Talisman, SubWallet, etc.)
      const extensions = await web3Enable('Academic Verify');
      
      if (extensions.length === 0) {
        toast.error('No wallet extension found', {
          description: 'Please install Polkadot.js, Talisman, or SubWallet'
        });
        return;
      }

      console.log(` Found ${extensions.length} wallet extension(s)`);

      // Get all accounts from all extensions
      const allAccounts = await web3Accounts();
      
      if (allAccounts.length === 0) {
        toast.error('No accounts found', {
          description: 'Please create an account in your wallet extension'
        });
        return;
      }

      console.log(` Found ${allAccounts.length} account(s)`);

      // Connect to the first account (in production, show account selector)
      const account = allAccounts[0];
      
      useWalletStore.setState({
        isConnected: true,
        account: {
          address: account.address,
          name: account.meta.name as string | undefined,
          source: account.meta.source as string | undefined,
        },
        accounts: allAccounts.map(acc => ({
          address: acc.address,
          name: acc.meta.name as string | undefined,
          source: acc.meta.source as string | undefined,
        })),
      });

      toast.success('Wallet connected', {
        description: `Connected to ${account.meta.name || 'account'}`
      });
    } catch (error) {
      console.error('Failed to enable wallet:', error);
      
      if (error instanceof Error && error.message.includes('Rejected')) {
        toast.error('Connection rejected', {
          description: 'Please approve the connection request'
        });
      } else {
        toast.error('Failed to connect wallet', {
          description: 'Please make sure your wallet extension is unlocked'
        });
      }
    }
  };

  return (
    <WalletContext.Provider value={{ enableWallet }}>
      {children}
    </WalletContext.Provider>
  );
}
</file>

<file path="src/store/credentials.store.ts">
// credentials.store.ts
import { create } from 'zustand';

interface Credential {
  id: string;
  holder: string;
  issuer: string;
  credentialHash: string;
  credentialType: string;
  issuedAt: number;
  expiresAt?: number;
  revoked: boolean;
  metadata?: string;
}

interface CredentialsState {
  credentials: Credential[];
  issuedCredentials: Credential[];
  loading: boolean;
  addCredential: (credential: Credential) => void;
  removeCredential: (id: string) => void;
  setCredentials: (credentials: Credential[]) => void;
  setIssuedCredentials: (credentials: Credential[]) => void;
  setLoading: (loading: boolean) => void;
}

export const useCredentialsStore = create<CredentialsState>((set) => ({
  credentials: [],
  issuedCredentials: [],
  loading: false,

  addCredential: (credential) => {
    set((state) => ({
      credentials: [...state.credentials, credential],
    }));
  },

  removeCredential: (id) => {
    set((state) => ({
      credentials: state.credentials.filter((c) => c.id !== id),
    }));
  },

  setCredentials: (credentials) => {
    set({ credentials });
  },

  setIssuedCredentials: (credentials) => {
    set({ issuedCredentials: credentials });
  },

  setLoading: (loading) => {
    set({ loading });
  },
}));
</file>

<file path="src/store/did.store.ts">
// did.store.ts
import { create } from 'zustand';
import { DID_STATUS } from '@/lib/utils/constants';

interface PublicKey {
  id: string;
  keyType: string;
  publicKey: string;
  addedAt: number;
}

interface DIDState {
  hasDID: boolean;
  status: typeof DID_STATUS[keyof typeof DID_STATUS];
  didAddress: string | null;
  publicKeys: PublicKey[];
  isInstitution: boolean;
  institutionName: string | null;
  createdAt: number | null;
  setDID: (didAddress: string, publicKeys: PublicKey[]) => void;
  setInstitution: (name: string) => void;
  setStatus: (status: typeof DID_STATUS[keyof typeof DID_STATUS]) => void;
  addPublicKey: (key: PublicKey) => void;
  removePublicKey: (keyId: string) => void;
  clearDID: () => void;
}

export const useDIDStore = create<DIDState>((set) => ({
  hasDID: false,
  status: DID_STATUS.NONE,
  didAddress: null,
  publicKeys: [],
  isInstitution: false,
  institutionName: null,
  createdAt: null,

  setDID: (didAddress, publicKeys) => {
    set({
      hasDID: true,
      didAddress,
      publicKeys,
      status: DID_STATUS.ACTIVE,
      createdAt: Date.now(),
    });
  },

  setInstitution: (name) => {
    set({
      isInstitution: true,
      institutionName: name,
    });
  },

  setStatus: (status) => {
    set({ status });
  },

  addPublicKey: (key) => {
    set((state) => ({
      publicKeys: [...state.publicKeys, key],
    }));
  },

  removePublicKey: (keyId) => {
    set((state) => ({
      publicKeys: state.publicKeys.filter(key => key.id !== keyId),
    }));
  },

  clearDID: () => {
    set({
      hasDID: false,
      status: DID_STATUS.NONE,
      didAddress: null,
      publicKeys: [],
      isInstitution: false,
      institutionName: null,
      createdAt: null,
    });
  },
}));
</file>

<file path="src/store/ui.store.ts">
// ui.store.ts
import { create } from 'zustand';

interface UIState {
  theme: 'light' | 'dark' | 'system';
  sidebarOpen: boolean;
  setTheme: (theme: 'light' | 'dark' | 'system') => void;
  toggleSidebar: () => void;
  setSidebarOpen: (open: boolean) => void;
}

export const useUIStore = create<UIState>((set) => ({
  theme: 'system',
  sidebarOpen: true,

  setTheme: (theme) => {
    set({ theme });
    // Apply theme to document
    if (theme === 'dark') {
      document.documentElement.classList.add('dark');
    } else if (theme === 'light') {
      document.documentElement.classList.remove('dark');
    } else {
      // System theme
      const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (isDark) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    }
  },

  toggleSidebar: () => {
    set((state) => ({ sidebarOpen: !state.sidebarOpen }));
  },

  setSidebarOpen: (open) => {
    set({ sidebarOpen: open });
  },
}));
</file>

<file path="src/store/wallet.store.ts">
// wallet.store.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface Account {
  address: string;
  name?: string;
  source?: string;
}

interface WalletState {
  isConnected: boolean;
  account: Account | null;
  accounts: Account[];
  balance: string;
  connectWallet: () => Promise<void>;
  disconnectWallet: () => void;
  selectAccount: (address: string) => void;
  setBalance: (balance: string) => void;
}

export const useWalletStore = create<WalletState>()(
  persist(
    (set, get) => ({
      isConnected: false,
      account: null,
      accounts: [],
      balance: '0',

      connectWallet: async () => {
        try {
          // This will be implemented with actual Polkadot extension logic
          console.log('Connecting wallet...');
          
          // Mock connection for now
          const mockAccount = {
            address: '5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY',
            name: 'Alice',
            source: 'polkadot-js',
          };
          
          set({
            isConnected: true,
            account: mockAccount,
            accounts: [mockAccount],
          });
        } catch (error) {
          console.error('Failed to connect wallet:', error);
          throw error;
        }
      },

      disconnectWallet: () => {
        set({
          isConnected: false,
          account: null,
          accounts: [],
          balance: '0',
        });
      },

      selectAccount: (address: string) => {
        const account = get().accounts.find(acc => acc.address === address);
        if (account) {
          set({ account });
        }
      },

      setBalance: (balance: string) => {
        set({ balance });
      },
    }),
    {
      name: 'wallet-storage',
      partialize: (state) => ({
        account: state.account,
      }),
    }
  )
);
</file>

<file path="src/App.css">
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}
</file>

<file path="src/App.tsx">
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { Toaster } from 'sonner';
import MainLayout from './components/layout/MainLayout';
import Home from './pages/Home';
import Dashboard from './pages/Dashboard';
import Credentials from './pages/Credentials';
import Institution from './pages/Institution';
import IssueCredential from './pages/IssueCredential';
import Verify from './pages/Verify';
import Institutions from './pages/Institutions';
import ErrorBoundary from './components/error/ErrorBoundary';
import { Suspense } from 'react';
import { Spinner } from './components/ui/Spinner';

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      refetchOnWindowFocus: false,
      retry: 1,
      staleTime: 5 * 60 * 1000,
    },
  },
});

// Loading fallback
const LoadingFallback = () => (
  <div className="flex items-center justify-center min-h-[60vh]">
    <div className="text-center">
      <Spinner size="lg" className="mx-auto mb-4" />
      <p className="text-muted-foreground">Loading...</p>
    </div>
  </div>
);

function App() {
  return (
    <ErrorBoundary>
      <QueryClientProvider client={queryClient}>
        <Router>
          <Suspense fallback={<LoadingFallback />}>
            <MainLayout>
              <Routes>
                <Route path="/" element={<Home />} />
                <Route path="/dashboard" element={<Dashboard />} />
                <Route path="/credentials" element={<Credentials />} />
                <Route path="/institution" element={<Institution />} />
                <Route path="/institution/issue" element={<IssueCredential />} />
                <Route path="/verify" element={<Verify />} />
                <Route path="/institutions" element={<Institutions />} />
              </Routes>
            </MainLayout>
          </Suspense>
        </Router>
        <Toaster position="top-right" richColors />
      </QueryClientProvider>
    </ErrorBoundary>
  );
}

export default App;
</file>

<file path="src/index.css">
@import "tailwindcss";

/* Custom theme configuration for Tailwind v4 */
@theme {
  --color-primary: #3b82f6;
  --color-primary-foreground: #ffffff;
  --color-secondary: #64748b;
  --color-secondary-foreground: #ffffff;
  --color-destructive: #ef4444;
  --color-destructive-foreground: #ffffff;
  --color-muted: #f1f5f9;
  --color-muted-foreground: #64748b;
  --color-accent: #f1f5f9;
  --color-accent-foreground: #0f172a;
  --color-card: #ffffff;
  --color-card-foreground: #0f172a;
  --color-background: #ffffff;
  --color-foreground: #0f172a;
  --color-border: #e2e8f0;
  --color-input: #e2e8f0;
  --color-ring: #3b82f6;
  
  --radius-lg: 0.5rem;
  --radius-md: calc(0.5rem - 2px);
  --radius-sm: calc(0.5rem - 4px);
}

/* Dark mode theme */
@media (prefers-color-scheme: dark) {
  @theme {
    --color-primary: #3b82f6;
    --color-primary-foreground: #ffffff;
    --color-secondary: #475569;
    --color-secondary-foreground: #ffffff;
    --color-destructive: #ef4444;
    --color-destructive-foreground: #ffffff;
    --color-muted: #1e293b;
    --color-muted-foreground: #94a3b8;
    --color-accent: #1e293b;
    --color-accent-foreground: #f1f5f9;
    --color-card: #0f172a;
    --color-card-foreground: #f1f5f9;
    --color-background: #020617;
    --color-foreground: #f1f5f9;
    --color-border: #1e293b;
    --color-input: #1e293b;
    --color-ring: #3b82f6;
  }
}

.dark {
  --color-primary: #3b82f6;
  --color-primary-foreground: #ffffff;
  --color-secondary: #475569;
  --color-secondary-foreground: #ffffff;
  --color-destructive: #ef4444;
  --color-destructive-foreground: #ffffff;
  --color-muted: #1e293b;
  --color-muted-foreground: #94a3b8;
  --color-accent: #1e293b;
  --color-accent-foreground: #f1f5f9;
  --color-card: #0f172a;
  --color-card-foreground: #f1f5f9;
  --color-background: #020617;
  --color-foreground: #f1f5f9;
  --color-border: #1e293b;
  --color-input: #1e293b;
  --color-ring: #3b82f6;
}

/* Base styles */
* {
  border-color: var(--color-border);
}

body {
  background-color: var(--color-background);
  color: var(--color-foreground);
  font-family: system-ui, -apple-system, sans-serif;
}
</file>

<file path="src/main.tsx">
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
)
</file>

<file path="src/vite-env.d.ts">
/// <reference types="vite/client" />

declare module '*.css';
</file>

<file path=".gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
</file>

<file path="check-files.sh">
#!/bin/bash

# Colors for output
GREEN='\033[0;32m'
RED='\033[0;31m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo " Checking Required Files..."
echo ""

# Function to check if file exists
check_file() {
    if [ -f "$1" ]; then
        echo -e "${GREEN} $1${NC}"
        return 0
    else
        echo -e "${RED} $1 (MISSING)${NC}"
        return 1
    fi
}

missing_count=0

echo " Checking UI Components..."
check_file "src/components/ui/Badge.tsx" || ((missing_count++))
check_file "src/components/ui/Button.tsx" || ((missing_count++))
check_file "src/components/ui/Card.tsx" || ((missing_count++))
check_file "src/components/ui/Input.tsx" || ((missing_count++))
check_file "src/components/ui/Modal.tsx" || ((missing_count++))
check_file "src/components/ui/Spinner.tsx" || ((missing_count++))
check_file "src/components/ui/index.ts" || ((missing_count++))

echo ""
echo " Checking Layout Components..."
check_file "src/components/layout/MainLayout.tsx" || ((missing_count++))
check_file "src/components/layout/Header.tsx" || ((missing_count++))
check_file "src/components/layout/Sidebar.tsx" || ((missing_count++))
check_file "src/components/layout/Footer.tsx" || ((missing_count++))

echo ""
echo " Checking Blockchain Components..."
check_file "src/components/blockchain/WalletConnect.tsx" || ((missing_count++))
check_file "src/components/blockchain/ChainStatus.tsx" || ((missing_count++))

echo ""
echo " Checking DID Components..."
check_file "src/components/did/DIDStatus.tsx" || ((missing_count++))

echo ""
echo " Checking Utilities..."
check_file "src/lib/utils/cn.ts" || ((missing_count++))
check_file "src/lib/utils/constants.ts" || ((missing_count++))

echo ""
echo " Checking Stores..."
check_file "src/store/wallet.store.ts" || ((missing_count++))
check_file "src/store/did.store.ts" || ((missing_count++))
check_file "src/store/credentials.store.ts" || ((missing_count++))
check_file "src/store/ui.store.ts" || ((missing_count++))

echo ""
echo " Checking Providers..."
check_file "src/providers/PolkadotProvider.tsx" || ((missing_count++))
check_file "src/providers/WalletProvider.tsx" || ((missing_count++))

echo ""
echo " Checking Hooks..."
check_file "src/hooks/blockchain/usePolkadotApi.ts" || ((missing_count++))

echo ""
echo " Checking Pages..."
check_file "src/pages/Home.tsx" || ((missing_count++))
check_file "src/pages/Dashboard.tsx" || ((missing_count++))
check_file "src/pages/Credentials.tsx" || ((missing_count++))
check_file "src/pages/Institution.tsx" || ((missing_count++))
check_file "src/pages/Verify.tsx" || ((missing_count++))
check_file "src/pages/Institutions.tsx" || ((missing_count++))

echo ""
echo " Checking Main Files..."
check_file "src/App.tsx" || ((missing_count++))
check_file "src/main.tsx" || ((missing_count++))
check_file "src/index.css" || ((missing_count++))

echo ""
echo " Checking Config Files..."
check_file "tsconfig.json" || ((missing_count++))
check_file "vite.config.ts" || ((missing_count++))
check_file "tailwind.config.js" || ((missing_count++))

echo ""
echo ""
if [ $missing_count -eq 0 ]; then
    echo -e "${GREEN} All required files are present!${NC}"
    echo ""
    echo "Next steps:"
    echo "1. Run: npm install (if you haven't already)"
    echo "2. Run: npm run dev"
    echo "3. Open: http://localhost:5174"
else
    echo -e "${RED}  Missing $missing_count file(s)${NC}"
    echo ""
    echo "Please create the missing files listed above."
    echo "Refer to the artifacts provided by Claude."
fi
echo ""
</file>

<file path="eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'

export default tseslint.config(
  { ignores: ['dist'] },
  {
    extends: [js.configs.recommended, ...tseslint.configs.recommended],
    files: ['**/*.{ts,tsx}'],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
    plugins: {
      'react-hooks': reactHooks,
      'react-refresh': reactRefresh,
    },
    rules: {
      ...reactHooks.configs.recommended.rules,
      'react-refresh/only-export-components': [
        'warn',
        { allowConstantExport: true },
      ],
    },
  },
)
</file>

<file path="index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>academic-verification-frontend</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
</file>

<file path="package.json">
{
  "name": "academic-verification-frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@hookform/resolvers": "^5.2.2",
    "@polkadot/api": "^16.5.4",
    "@polkadot/extension-dapp": "^0.62.6",
    "@polkadot/keyring": "^14.0.1",
    "@polkadot/util-crypto": "^14.0.1",
    "@tailwindcss/vite": "^4.1.18",
    "@tanstack/react-query": "^5.90.13",
    "autoprefixer": "^10.4.23",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "lucide-react": "^0.562.0",
    "postcss": "^8.5.6",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-hook-form": "^7.69.0",
    "react-router-dom": "^7.11.0",
    "sonner": "^2.0.7",
    "tailwind-merge": "^3.4.0",
    "tailwindcss": "^4.1.18",
    "zod": "^4.2.1",
    "bn.js": "^5.2.1",
    "zustand": "^5.0.9"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/node": "^24.10.4",
    "@types/react": "^19.2.5",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "typescript": "~5.9.3",
    "typescript-eslint": "^8.46.4",
    "vite": "^7.2.4",
    "vite-plugin-node-polyfills": "^0.24.0"
  }
}
</file>

<file path="README.md">
# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...

      // Remove tseslint.configs.recommended and replace with this
      tseslint.configs.recommendedTypeChecked,
      // Alternatively, use this for stricter rules
      tseslint.configs.strictTypeChecked,
      // Optionally, add this for stylistic rules
      tseslint.configs.stylisticTypeChecked,

      // Other configs...
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...
      // Enable lint rules for React
      reactX.configs['recommended-typescript'],
      // Enable lint rules for React DOM
      reactDom.configs.recommended,
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```
</file>

<file path="tsconfig.app.json">
{
  "compilerOptions": {
    "composite": true,
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "types": ["vite/client"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    
    /* Bundler mode */
    "moduleResolution": "Bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",
    
    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true,
    
    /* Path Aliases */
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    },
    
    /* Additional */
    "resolveJsonModule": true,
    "allowSyntheticDefaultImports": true,
    "esModuleInterop": true
  },
  "include": ["src"]
}
</file>

<file path="tsconfig.node.json">
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["ES2023"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "Bundler",
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "noEmit": true,
    "resolveJsonModule": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="tsconfig.tsbuildinfo">
{"root":["./src/app.tsx","./src/main.tsx","./src/vite-env.d.ts","./src/components/blockchain/chainstatus.tsx","./src/components/blockchain/walletconnect.tsx","./src/components/blockchain/index.ts","./src/components/credentials/issuecredentialform.tsx","./src/components/credentials/index.ts","./src/components/did/createdidform.tsx","./src/components/did/createdidmodal.tsx","./src/components/did/didstatus.tsx","./src/components/did/institutionregistration.tsx","./src/components/did/index.ts","./src/components/layout/footer.tsx","./src/components/layout/header.tsx","./src/components/layout/mainlayout.tsx","./src/components/layout/sidebar.tsx","./src/components/layout/index.ts","./src/components/ui/badge.tsx","./src/components/ui/button.tsx","./src/components/ui/card.tsx","./src/components/ui/input.tsx","./src/components/ui/modal.tsx","./src/components/ui/spinner.tsx","./src/components/ui/index.ts","./src/hooks/blockchain/usepolkadotapi.ts","./src/lib/utils/cn.ts","./src/lib/utils/constants.ts","./src/pages/createdidpage.tsx","./src/pages/credentials.tsx","./src/pages/dashboard.tsx","./src/pages/home.tsx","./src/pages/institution.tsx","./src/pages/institutions.tsx","./src/pages/issuecredential.tsx","./src/pages/verify.tsx","./src/providers/polkadotprovider.tsx","./src/providers/walletprovider.tsx","./src/store/credentials.store.ts","./src/store/did.store.ts","./src/store/ui.store.ts","./src/store/wallet.store.ts"],"errors":true,"version":"5.9.3"}
</file>

<file path="vite.config.ts">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import tailwindcss from '@tailwindcss/vite'
import path from 'path'

export default defineConfig({
  plugins: [react(), tailwindcss()],
  
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  
  optimizeDeps: {
    // Exclude Polkadot packages from pre-bundling
    exclude: [
      '@polkadot/api',
      '@polkadot/extension-dapp',
      '@polkadot/util',
      '@polkadot/util-crypto',
      '@polkadot/keyring',
      '@polkadot/types',
      '@polkadot/rpc-provider',
    ],
    esbuildOptions: {
      target: 'esnext',
      supported: {
        bigint: true,
      },
    },
  },
  
  build: {
    target: 'esnext',
    commonjsOptions: {
      transformMixedEsModules: true,
    },
  },
  
  // Define global variables
  define: {
    global: 'globalThis',
  },
})
</file>

</files>
